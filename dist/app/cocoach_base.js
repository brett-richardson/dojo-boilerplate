//>>built
require({cache:{"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(h){return h.dojox})},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(h){return h.dijit})},"dijit/Tree":function(){require({cache:{"url:dijit/templates/TreeNode.html":'<div class="dijitTreeNode" role="presentation"\n\t><div data-dojo-attach-point="rowNode" class="dijitTreeRow dijitInline" role="presentation"\n\t\t><div data-dojo-attach-point="indentNode" class="dijitInline"></div\n\t\t><img src="${_blankGif}" alt="" data-dojo-attach-point="expandoNode" class="dijitTreeExpando" role="presentation"\n\t\t/><span data-dojo-attach-point="expandoNodeText" class="dijitExpandoText" role="presentation"\n\t\t></span\n\t\t><span data-dojo-attach-point="contentNode"\n\t\t\tclass="dijitTreeContent" role="presentation">\n\t\t\t<img src="${_blankGif}" alt="" data-dojo-attach-point="iconNode" class="dijitIcon dijitTreeIcon" role="presentation"\n\t\t\t/><span data-dojo-attach-point="labelNode" class="dijitTreeLabel" role="treeitem" tabindex="-1" aria-selected="false"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeContainer" role="presentation" style="display: none;"></div>\n</div>\n',
"url:dijit/templates/Tree.html":'<div class="dijitTree dijitTreeContainer" role="tree">\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" data-dojo-attach-point="indentDetector"></div>\n</div>\n'}});define("dijit/Tree","dojo/_base/array,dojo/_base/connect,dojo/cookie,dojo/_base/declare,dojo/Deferred,dojo/DeferredList,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/errors/create,dojo/fx,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/on,dojo/topic,dojo/touch,dojo/when,./focus,./registry,./_base/manager,./_Widget,./_TemplatedMixin,./_Container,./_Contained,./_CssStateMixin,dojo/text!./templates/TreeNode.html,dojo/text!./templates/Tree.html,./tree/TreeStoreModel,./tree/ForestStoreModel,./tree/_dndSelector".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q,u,s,o,B,t,r,p,y,v,w,x,D,z,E,C,A,G,I){var c=e(c,{addCallback:function(a){this.then(a)},addErrback:function(a){this.then(null,a)}}),H=e("dijit._TreeNode",[v,w,x,D,z],{item:null,isTreeNode:!0,label:"",_setLabelAttr:{node:"labelNode",type:"innerText"},isExpandable:null,isExpanded:!1,state:"UNCHECKED",templateString:E,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);
this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";f.set(this.domNode,"backgroundPosition",b+" 0px");f.set(this.indentNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);h.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="LOADING";this._setExpando(!0)},
unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,d=b.model;b._v10Compat&&a===d.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var m="_"+b+"Class",b=b+"Node",A=this[m];this[m]=this.tree["get"+c+"Class"](a,this.isExpanded);d.replace(this[b],this[m]||"",A||"");f.set(this[b],this.tree["get"+c+"Style"](a,
this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();!a||!a.rowNode||"none"==a.rowNode.style.display?d.add(this.domNode,"dijitTreeIsRoot"):d.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling())},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],a=a?0:this.isExpandable?this.isExpanded?1:2:3;d.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return this._expandDeferred;
this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role","group");d.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a,b=n.wipeIn({node:this.containerNode,
duration:y.defaultDuration,onEnd:function(){a.resolve(!0)}});a=this._expandDeferred=new c(function(){b.stop()});b.play();return a},collapse:function(){if(this._collapseDeferred)return this._collapseDeferred;this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");d.remove(this.contentNode,"dijitTreeContentExpanded");
this._setExpando();this._updateItemClasses(this.item);var a,b=n.wipeOut({node:this.containerNode,duration:y.defaultDuration,onEnd:function(){a.resolve(!0)}});a=this._collapseDeferred=new c(function(){b.stop()});b.play();return a},indent:0,setChildItems:function(b){var d=this.tree,f=d.model,c=[],m=this.getChildren();h.forEach(m,function(a){x.prototype.removeChild.call(this,a)},this);this.defer(function(){h.forEach(m,function(a){if(!a._destroyed&&!a.getParent()){d.dndController.removeTreeNode(a);var b=
f.getIdentity(a.item),c=d._itemNodesMap[b];1==c.length?delete d._itemNodesMap[b]:(b=h.indexOf(c,a),-1!=b&&c.splice(b,1));a.destroyRecursive()}})});this.state="LOADED";b&&0<b.length?(this.isExpandable=!0,h.forEach(b,function(a){var b=f.getIdentity(a),m=d._itemNodesMap[b],A;if(m)for(var n=0;n<m.length;n++)if(m[n]&&!m[n].getParent()){A=m[n];A.set("indent",this.indent+1);break}A||(A=this.tree._createTreeNode({item:a,tree:d,isExpandable:f.mayHaveChildren(a),label:d.getLabel(a),tooltip:d.getTooltip(a),
ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,textDir:d.textDir,indent:this.indent+1}),m?m.push(A):d._itemNodesMap[b]=[A]);this.addChild(A);(this.tree.autoExpand||this.tree._state(A))&&c.push(d._expandNode(A))},this),h.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);if(this==d.rootNode)(b=this.tree.showRoot?this:this.getChildren()[0])?(b.setFocusable(!0),d.lastFocused=b):d.domNode.setAttribute("tabIndex",
"0");b=new a(c);this.tree._startPaint(b);return b},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();if(0==b.length)this.isExpandable=!1,this.collapse();h.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},
setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");d.toggle(this.rowNode,"dijitTreeRowSelected",a)},setFocusable:function(a){this.labelNode.setAttribute("tabIndex",a?"0":"-1")},_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode,this.labelNode.innerText||this.labelNode.textContent||""),h.forEach(this.getChildren(),function(b){b.set("textDir",a)},this)}}),F=e("dijit.Tree",[v,w],{store:null,model:null,
query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:C,persist:!0,autoExpand:!1,dndController:I,dndParams:"onDndDrop,itemCreator,onDndCancel,checkAcceptance,checkItemAcceptance,dragThreshold,betweenThreshold".split(","),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){o.publish(this.id,
u.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;if(this.autoExpand)this.persist=!1;this._itemNodesMap={};if(!this.cookieName&&this.id)this.cookieName=this.id+"SaveStateCookie";this.pendingCommandsDeferred=this.expandChildrenDeferred=new c;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(s(this.domNode,s.selector(".dijitTreeNode",B.enter),function(b){a._onNodeMouseEnter(p.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode",
B.leave),function(b){a._onNodeMouseLeave(p.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","click"),function(b){a._onClick(p.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","dblclick"),function(b){a._onDblClick(p.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","keypress"),function(b){a._onKeyPress(p.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","keydown"),function(b){a._onKeyDown(p.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeRow","focusin"),
function(b){a._onNodeFocus(p.getEnclosingWidget(this),b)}));this.model||this._store2model();this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this.inherited(arguments);if(this.dndController){if(u.isString(this.dndController))this.dndController=u.getObject(this.dndController);for(var b={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(b[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,b)}this._load();!this.params.path&&!this.params.paths&&this.persist&&this.set("paths",this.dndController._getSavedPaths());this.onLoadDeferred=this.pendingCommandsDeferred;this.onLoadDeferred.then(u.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;m.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};
if(this.params.mayHaveChildren)a.mayHaveChildren=u.hitch(this,"mayHaveChildren");if(this.params.getItemChildren)a.getChildren=u.hitch(this,function(a,b,d){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,d)});this.model=new G(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(u.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),b.labelNode.setAttribute("role","presentation"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));
this.domNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(u.hitch(this,function(){this.expandChildrenDeferred.resolve(!0)}))}),u.hitch(this,function(){}))},getNodesByItem:function(a){return!a?[]:[].concat(this._itemNodesMap[u.isString(a)?a:this.model.getIdentity(a)])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;
return this.pendingCommandsDeferred=this.pendingCommandsDeferred.then(u.hitch(this,function(){var d=h.map(a,function(a){return!a||u.isString(a)?a:b.model.getIdentity(a)}),f=[];h.forEach(d,function(a){f=f.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",f)}))},_setPathAttr:function(a){return a.length?this.set("paths",[a]):this.set("paths",[])},_setPathsAttr:function(b){function d(a,b,c){var m=a.shift(),A=h.filter(b,function(a){return a.getIdentity()==m})[0];A?a.length?f._expandNode(A).then(function(){d(a,
A.getChildren(),c)}):c.resolve(A):c.reject(new F.PathError("Could not expand path at "+m))}var f=this;return this.pendingCommandsDeferred=this.pendingCommandsDeferred.then(function(){return new a(h.map(b,function(a){var b=new c,a=h.map(a,function(a){return u.isString(a)?a:f.model.getIdentity(a)});a.length?d(a,[f.rootNode],b):b.reject(new F.PathError("Empty path"));return b}))}).then(function(a){f.set("selectedNodes",h.map(h.filter(a,function(a){return a[0]}),function(a){return a[1]}))})},_setSelectedNodeAttr:function(a){this.set("selectedNodes",
[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function a(d){var f=new dojo.Deferred;b._expandNode(d).then(function(){var b=h.filter(d.getChildren()||[],function(a){return a.isExpandable}),b=h.map(b,a);(new dojo.DeferredList(b)).then(function(){f.resolve(!0)})});return f}var b=this;return a(this.rootNode)},collapseAll:function(){function a(d){var f=new dojo.Deferred;f.label="collapseAllDeferred";var c=h.filter(d.getChildren()||[],function(a){return a.isExpandable}),
c=h.map(c,a);(new dojo.DeferredList(c)).then(function(){!d.isExpanded||d==b.rootNode&&!b.showRoot?f.resolve(!0):b._collapseNode(d).then(function(){f.resolve(!0)})});return f}var b=this;return a(this.rootNode)},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},
getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onKeyPress:function(a,b){if(!(32>=b.charCode)&&!b.altKey&&!b.ctrlKey&&!b.shiftKey&&!b.metaKey){var d=String.fromCharCode(b.charCode);this._onLetterKeyNav({node:a,key:d.toLowerCase()});j.stop(b)}},_onKeyDown:function(a,b){var d=b.keyCode,f=this._keyHandlerMap;if(!f)f={},f[q.ENTER]=f[q.SPACE]=f[" "]="_onEnterKey",f[this.isLeftToRight()?q.LEFT_ARROW:q.RIGHT_ARROW]="_onLeftArrow",f[this.isLeftToRight()?q.RIGHT_ARROW:
q.LEFT_ARROW]="_onRightArrow",f[q.UP_ARROW]="_onUpArrow",f[q.DOWN_ARROW]="_onDownArrow",f[q.HOME]="_onHomeKey",f[q.END]="_onEndKey",this._keyHandlerMap=f;this._keyHandlerMap[d]&&(this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch),this[this._keyHandlerMap[d]]({node:a,item:a.item,evt:b}),j.stop(b))},_onEnterKey:function(a){this._publish("execute",{item:a.item,node:a.node});this.dndController.userSelect(a.node,l.isCopyKey(a.evt),a.evt.shiftKey);this.onClick(a.item,a.node,a.evt)},
_onDownArrow:function(a){(a=this._getNextNode(a.node))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a){var a=a.node,b=a.getPreviousSibling();if(b)for(a=b;a.isExpandable&&a.isExpanded&&a.hasChildren();)a=a.getChildren(),a=a[a.length-1];else if(b=a.getParent(),this.showRoot||b!==this.rootNode)a=b;a&&a.isTreeNode&&this.focusNode(a)},_onRightArrow:function(a){a=a.node;a.isExpandable&&!a.isExpanded?this._expandNode(a):a.hasChildren()&&(a=a.getChildren()[0])&&a.isTreeNode&&this.focusNode(a)},_onLeftArrow:function(a){a=
a.node;a.isExpandable&&a.isExpanded?this._collapseNode(a):(a=a.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},_onHomeKey:function(){var a=this._getRootOrFirstNode();a&&this.focusNode(a)},_onEndKey:function(){for(var a=this.rootNode;a.isExpanded;)a=a.getChildren(),a=a[a.length-1];a&&a.isTreeNode&&this.focusNode(a)},multiCharSearchDuration:250,_onLetterKeyNav:function(a){var b=this._curSearch;b?(b.pattern+=a.key,b.timer.remove()):b=this._curSearch={pattern:a.key,
startNode:a.node};b.timer=this.defer(function(){delete this._curSearch},this.multiCharSearchDuration);a=b.startNode;do(a=this._getNextNode(a))||(a=this._getRootOrFirstNode());while(a!==b.startNode&&a.label.toLowerCase().substr(0,b.pattern.length)!=b.pattern);a&&a.isTreeNode&&a!==b.startNode&&this.focusNode(a)},isExpandoNode:function(a,d){return b.isDescendant(a,d.expandoNode)},_onClick:function(a,b){var d=this.isExpandoNode(b.target,a);this.openOnClick&&a.isExpandable||d?a.isExpandable&&this._onExpandoClick({node:a}):
(this._publish("execute",{item:a.item,node:a,evt:b}),this.onClick(a.item,a,b),this.focusNode(a));j.stop(b)},_onDblClick:function(a,b){var d=b.target,d=d==a.expandoNode||d==a.expandoNodeText;this.openOnDblClick&&a.isExpandable||d?a.isExpandable&&this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this.onDblClick(a.item,a,b),this.focusNode(a));j.stop(b)},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},
onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("LOADING"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,
a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){var b=new c;if(a._expandNodeDeferred)return a._expandNodeDeferred;var d=this.model,f=a.item;if(!a._loadDeferred)a.markProcessing(),a._loadDeferred=new c,d.getChildren(f,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){a._loadDeferred.reject(b)});a._loadDeferred.then(u.hitch(this,function(){a.expand().then(function(){b.resolve(!0)});this.onOpen(a.item,a);this._state(a,
!0)}));this._startPaint(b);return b},focusNode:function(a){r.focus(a.labelNode)},_onNodeFocus:function(a){if(a&&a!=this.lastFocused)this.lastFocused&&!this.lastFocused._destroyed&&this.lastFocused.setFocusable(!1),a.setFocusable(!0),this.lastFocused=a},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this._itemNodesMap[this.model.getIdentity(a)];if(b){var d=this.getLabel(a),f=this.getTooltip(a);h.forEach(b,function(b){b.set({item:a,label:d,tooltip:f});
b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var d=this._itemNodesMap[this.model.getIdentity(a)];d&&h.forEach(d,function(a){a.setChildItems(b)})},_onItemDelete:function(a){var a=this.model.getIdentity(a),b=this._itemNodesMap[a];b&&(h.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=i(this.cookieName);
a&&h.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var d=h.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[d];b?this._openedNodes[d]=!0:delete this._openedNodes[d];if(this.persist&&this.cookieName){var d=[],f;for(f in this._openedNodes)d.push(f);i(this.cookieName,d.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!u.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&g.setMarginBox(this.domNode,a);this._nodePixelIndent=g.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(u.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=u.hitch(this,function(){this._outstandingPaintOperations--;if(0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started)this._adjustWidthsTimer=this.defer("_adjustWidths")});t(a,b,b)},_adjustWidths:function(){function a(f){var c=f.rowNode;c.style.width="auto";b=Math.max(b,c.clientWidth);d.push(c);
f.isExpanded&&h.forEach(f.getChildren(),a)}this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=0,d=[];a(this.rootNode);b=Math.max(b,g.getContentBox(this.domNode).w);h.forEach(d,function(a){a.style.width=b+"px"})},_createTreeNode:function(a){return new H(a)},_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});F.PathError=k("TreePathError");F._TreeNode=H;return F})},"dojo/cookie":function(){define("dojo/cookie",
["./_base/kernel","./regexp"],function(h,l){h.cookie=function(h,e,c){var a=document.cookie,b;if(1==arguments.length)b=(b=a.match(RegExp("(?:^|; )"+l.escapeString(h)+"=([^;]*)")))?decodeURIComponent(b[1]):void 0;else{c=c||{};a=c.expires;if("number"==typeof a){var d=new Date;d.setTime(d.getTime()+864E5*a);a=c.expires=d}if(a&&a.toUTCString)c.expires=a.toUTCString();var e=encodeURIComponent(e),a=h+"="+e,g;for(g in c)a+="; "+g,d=c[g],!0!==d&&(a+="="+d);document.cookie=a}return b};h.cookie.isSupported=
function(){if(!("cookieEnabled"in navigator))this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1});return navigator.cookieEnabled};return h.cookie})},"dojo/regexp":function(){define("dojo/regexp",["./_base/kernel","./_base/lang"],function(h,l){var i={};l.setObject("dojo.regexp",i);i.escapeString=function(e,c){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return c&&
-1!=c.indexOf(a)?a:"\\"+a})};i.buildGroupRE=function(e,c,a){if(!(e instanceof Array))return c(e);for(var b=[],d=0;d<e.length;d++)b.push(c(e[d]));return i.group(b.join("|"),a)};i.group=function(e,c){return"("+(c?"?:":"")+e+")"};return i})},"dojo/DeferredList":function(){define("dojo/DeferredList",["./_base/kernel","./_base/Deferred","./_base/array"],function(h,l,i){h.DeferredList=function(e,c,a,b){var d=[];l.call(this);var g=this;0===e.length&&!c&&this.resolve([0,[]]);var f=0;i.forEach(e,function(j,
k){function n(a,b){d[k]=[a,b];f++;f===e.length&&g.resolve(d)}j.then(function(a){c?g.resolve([k,a]):n(!0,a)},function(d){a?g.reject(d):n(!1,d);if(b)return null;throw d;})})};h.DeferredList.prototype=new l;h.DeferredList.prototype.gatherResults=function(e){e=new h.DeferredList(e,!1,!0,!1);e.addCallback(function(c){var a=[];i.forEach(c,function(b){a.push(b[1])});return a});return e};return h.DeferredList})},"dojo/fx":function(){define("dojo/fx","./_base/lang,./Evented,./_base/kernel,./_base/array,./_base/connect,./_base/fx,./dom,./dom-style,./dom-geometry,./ready,require".split(","),
function(h,l,i,e,c,a,b,d,g,f,j){i.isAsync||f(0,function(){j(["./fx/Toggler"])});var i=i.fx={},f={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}},k=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;e.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};k.prototype=new l;h.extend(k,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){c.disconnect(this._onAnimateCtx);
c.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=c.connect(this._current,"onAnimate",this,"_onAnimate"),this._onEndCtx=c.connect(this._current,"onEnd",this,"_onEnd"),this._current.play(0,!0))},play:function(a,b){if(!this._current)this._current=this._animations[this._index=0];if(!b&&"playing"==this._current.status())return this;var d=c.connect(this._current,
"beforeBegin",this,function(){this._fire("beforeBegin")}),f=c.connect(this._current,"onBegin",this,function(a){this._fire("onBegin",arguments)}),n=c.connect(this._current,"onPlay",this,function(a){this._fire("onPlay",arguments);c.disconnect(d);c.disconnect(f);c.disconnect(n)});this._onAnimateCtx&&c.disconnect(this._onAnimateCtx);this._onAnimateCtx=c.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx&&c.disconnect(this._onEndCtx);this._onEndCtx=c.connect(this._current,"onEnd",this,
"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=c.connect(this._current,"onPause",this,function(b){this._fire("onPause",arguments);c.disconnect(a)});this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var d=this.duration*a;this._current=null;e.some(this._animations,function(a){if(a.duration<=d)return this._current=a,!0;d-=a.duration;return!1});this._current&&this._current.gotoPercent(d/this._current.duration,b);
return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=c.connect(this._current,"onStop",this,function(a){this._fire("onStop",arguments);c.disconnect(b)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&c.disconnect(this._onAnimateCtx);this._onEndCtx&&c.disconnect(this._onEndCtx)}});
h.extend(k,f);i.chain=function(a){return new k(a)};var n=function(b){this._animations=b||[];this._connects=[];this.duration=this._finished=0;e.forEach(b,function(a){var b=a.duration;a.delay&&(b+=a.delay);if(this.duration<b)this.duration=b;this._connects.push(c.connect(a,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new a.Animation({curve:[0,1],duration:this.duration});var d=this;e.forEach("beforeBegin,onBegin,onPlay,onAnimate,onPause,onStop,onEnd".split(","),function(a){d._connects.push(c.connect(d._pseudoAnimation,
a,function(){d._fire(a,arguments)}))})};h.extend(n,{_doAction:function(a,b){e.forEach(this._animations,function(d){d[a].apply(d,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var d=this._pseudoAnimation;d[a].apply(d,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,
b){var d=this.duration*a;e.forEach(this._animations,function(a){a.gotoPercent(a.duration<d?1:d/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){e.forEach(this._connects,c.disconnect)}});h.extend(n,f);i.combine=function(a){return new n(a)};i.wipeIn=function(f){var n=f.node=b.byId(f.node),k=n.style,g,f=a.animateProperty(h.mixin({properties:{height:{start:function(){g=
k.overflow;k.overflow="hidden";if("hidden"==k.visibility||"none"==k.display)return k.height="1px",k.display="",k.visibility="",1;var a=d.get(n,"height");return Math.max(a,1)},end:function(){return n.scrollHeight}}}},f)),j=function(){k.height="auto";k.overflow=g};c.connect(f,"onStop",j);c.connect(f,"onEnd",j);return f};i.wipeOut=function(d){var f=(d.node=b.byId(d.node)).style,n,d=a.animateProperty(h.mixin({properties:{height:{end:1}}},d));c.connect(d,"beforeBegin",function(){n=f.overflow;f.overflow=
"hidden";f.display=""});var k=function(){f.overflow=n;f.height="auto";f.display="none"};c.connect(d,"onStop",k);c.connect(d,"onEnd",k);return d};i.slideTo=function(f){var n=null,k=null,j=function(a){return function(){var b=d.getComputedStyle(a),f=b.position;n="absolute"==f?a.offsetTop:parseInt(b.top)||0;k="absolute"==f?a.offsetLeft:parseInt(b.left)||0;if("absolute"!=f&&"relative"!=f)b=g.position(a,!0),n=b.y,k=b.x,a.style.position="absolute",a.style.top=n+"px",a.style.left=k+"px"}}(f.node=b.byId(f.node));
j();f=a.animateProperty(h.mixin({properties:{top:f.top||0,left:f.left||0}},f));c.connect(f,"beforeBegin",f,j);return f};return i})},"dojo/touch":function(){define("dojo/touch","./_base/kernel,./_base/lang,./aspect,./dom,./on,./has,./mouse,./ready,./_base/window".split(","),function(h,l,i,e,c,a,b,d,g){function f(a){return function(b,d){return c(b,a,d)}}var i=a("touch"),j,k;i&&(d(function(){k=g.body();g.doc.addEventListener("touchstart",function(a){var b=k;k=a.target;c.emit(b,"dojotouchout",{target:b,
relatedTarget:k,bubbles:!0});c.emit(k,"dojotouchover",{target:k,relatedTarget:b,bubbles:!0})},!0);c(g.doc,"touchmove",function(a){if((a=g.doc.elementFromPoint(a.pageX-g.global.pageXOffset,a.pageY-g.global.pageYOffset))&&k!==a)c.emit(k,"dojotouchout",{target:k,relatedTarget:a,bubbles:!0}),c.emit(a,"dojotouchover",{target:a,relatedTarget:k,bubbles:!0}),k=a})}),j=function(a,b){return c(g.doc,"touchmove",function(d){(a===g.doc||e.isDescendant(k,a))&&b.call(this,l.mixin({},d,{target:k}))})});b={press:f(i?
"touchstart":"mousedown"),move:i?j:f("mousemove"),release:f(i?"touchend":"mouseup"),cancel:i?f("touchcancel"):b.leave,over:f(i?"dojotouchover":"mouseover"),out:f(i?"dojotouchout":"mouseout"),enter:b._eventHandler(i?"dojotouchover":"mouseover"),leave:b._eventHandler(i?"dojotouchout":"mouseout")};return h.touch=b})},"dijit/focus":function(){define("dijit/focus","dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q,u,s){var o=new (l([j,a],{curNode:null,activeStack:[],constructor:function(){var a=b.hitch(this,function(a){i.isDescendant(this.curNode,a)&&this.set("curNode",null);i.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});h.before(c,"empty",a);h.before(c,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var d=this,c=function(a){d._justMouseDowned=!0;setTimeout(function(){d._justMouseDowned=!1},0);
if(!f("ie")||!a||!(a.srcElement&&null==a.srcElement.parentNode))d._onTouchNode(b||a.target||a.srcElement,"mouse")},k=f("ie")?a.document.documentElement:a.document;if(k){if(f("ie")){a.document.body.attachEvent("onmousedown",c);var n=function(a){var f=a.srcElement.tagName.toLowerCase();"#document"==f||"body"==f||(q.isTabNavigable(a.srcElement)?d._onFocusNode(b||a.srcElement):d._onTouchNode(b||a.srcElement))};k.attachEvent("onfocusin",n);var g=function(a){d._onBlurNode(b||a.srcElement)};k.attachEvent("onfocusout",
g);return{remove:function(){a.document.detachEvent("onmousedown",c);k.detachEvent("onfocusin",n);k.detachEvent("onfocusout",g);k=null}}}k.body.addEventListener("mousedown",c,!0);k.body.addEventListener("touchstart",c,!0);var m=function(a){d._onFocusNode(b||a.target)};k.addEventListener("focus",m,!0);var j=function(a){d._onBlurNode(b||a.target)};k.addEventListener("blur",j,!0);return{remove:function(){k.body.removeEventListener("mousedown",c,!0);k.body.removeEventListener("touchstart",c,!0);k.removeEventListener("focus",
m,!0);k.removeEventListener("blur",j,!0);k=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(b.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(b.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(a,
b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var d=[];try{for(;a;){var f=e.get(a,"dijitPopupParent");if(f)a=u.byId(f).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===n.body())break;a=m.get(a.ownerDocument).frameElement}else{var c=a.getAttribute&&a.getAttribute("widgetId"),k=c&&u.byId(c);k&&!("mouse"==b&&k.get("disabled"))&&d.unshift(c);a=a.parentNode}}}catch(g){}this._setStack(d,b)},_onFocusNode:function(a){a&&
9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var d=this.activeStack;this.set("activeStack",a);for(var f=0;f<Math.min(d.length,a.length)&&!(d[f]!=a[f]);f++);for(var c,k=d.length-1;k>=f;k--)if(c=u.byId(d[k]))c._hasBeenBlurred=!0,c.set("focused",!1),c._focusManager==this&&c._onBlur(b),this.emit("widget-blur",c,b);for(k=
f;k<a.length;k++)if(c=u.byId(a[k]))c.set("focused",!0),c._focusManager==this&&c._onFocus(b),this.emit("widget-focus",c,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));g(function(){var a=o.registerWin(m.get(n.doc));f("ie")&&k.addOnWindowUnload(function(){a&&(a.remove(),a=null)})});s.focus=function(a){o.focus(a)};for(var B in o)/^_/.test(B)||(s.focus[B]="function"==typeof o[B]?b.hitch(o,B):o[B]);o.watch(function(a,b,d){s.focus[a]=d});return o})},"dojo/Stateful":function(){define("dojo/Stateful",
["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(h,l,i,e){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(c){var a=this._attrPairNames;return a[c]?a[c]:a[c]={s:"_"+c+"Setter",g:"_"+c+"Getter"}},postscript:function(c){c&&this.set(c)},_get:function(c,a){return"function"===typeof this[a.g]?this[a.g]():this[c]},get:function(c){return this._get(c,this._getAttrNames(c))},set:function(c,a){if("object"===typeof c){for(var b in c)c.hasOwnProperty(b)&&"_watchCallbacks"!=
b&&this.set(b,c[b]);return this}b=this._getAttrNames(c);var d=this._get(c,b);b=this[b.s];var g;"function"===typeof b?g=b.apply(this,Array.prototype.slice.call(arguments,1)):this[c]=a;if(this._watchCallbacks){var f=this;e(g,function(){f._watchCallbacks(c,d,a)})}return this},_changeAttrValue:function(c,a){var b=this.get(c);this[c]=a;this._watchCallbacks&&this._watchCallbacks(c,b,a);return this},watch:function(c,a){var b=this._watchCallbacks;if(!b)var d=this,b=this._watchCallbacks=function(a,f,c,g){var e=
function(b){if(b)for(var b=b.slice(),g=0,m=b.length;g<m;g++)b[g].call(d,a,f,c)};e(b["_"+a]);g||e(b["*"])};!a&&"function"===typeof c?(a=c,c="*"):c="_"+c;var g=b[c];"object"!==typeof g&&(g=b[c]=[]);g.push(a);var f={};f.unwatch=f.remove=function(){var b=i.indexOf(g,a);-1<b&&g.splice(b,1)};return f}})})},"dojo/window":function(){define("dojo/window","./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style".split(","),function(h,l,i,e,c,a){var b={getBox:function(a){var a=a||i.doc,g="BackCompat"==
a.compatMode?i.body(a):a.documentElement,f=c.docScroll(a);if(l("touch"))var j=b.get(a),a=j.innerWidth||g.clientWidth,g=j.innerHeight||g.clientHeight;else a=g.clientWidth,g=g.clientHeight;return{l:f.x,t:f.y,w:a,h:g}},get:function(a){if(l("ie")&&b!==document.parentWindow){a.parentWindow.execScript("document._parentWindow = window;","Javascript");var c=a._parentWindow;a._parentWindow=null;return c}return a.parentWindow||a.defaultView},scrollIntoView:function(b,g){try{var b=e.byId(b),f=b.ownerDocument||
i.doc,j=i.body(f),k=f.documentElement||j.parentNode,n=l("ie"),m=l("webkit");if((!l("mozilla")&&!n&&!m&&!l("opera")||b==j||b==k)&&"undefined"!=typeof b.scrollIntoView)b.scrollIntoView(!1);else{var q="BackCompat"==f.compatMode,u=9<=n&&"frameElement"in b.ownerDocument.parentWindow?0<k.clientHeight&&0<k.clientWidth&&(0==j.clientHeight||0==j.clientWidth||j.clientHeight>k.clientHeight||j.clientWidth>k.clientWidth)?k:j:q?j:k,m=m?j:u,s=u.clientWidth,o=u.clientHeight,h=!c.isBodyLtr(f),t=g||c.position(b),r=
b.parentNode,f=function(b){return 6>=n||n&&q?!1:"fixed"==a.get(b,"position").toLowerCase()};if(!f(b))for(;r;){r==j&&(r=m);var p=c.position(r),y=f(r);if(r==m){p.w=s;p.h=o;m==k&&n&&h&&(p.x+=m.offsetWidth-p.w);if(0>p.x||!n)p.x=0;if(0>p.y||!n)p.y=0}else{var v=c.getPadBorderExtents(r);p.w-=v.w;p.h-=v.h;p.x+=v.l;p.y+=v.t;var w=r.clientWidth,x=p.w-w;if(0<w&&0<x)p.w=w,p.x+=h&&(n||r.clientLeft>v.l)?x:0;w=r.clientHeight;x=p.h-w;if(0<w&&0<x)p.h=w}if(y){if(0>p.y)p.h+=p.y,p.y=0;if(0>p.x)p.w+=p.x,p.x=0;if(p.y+
p.h>o)p.h=o-p.y;if(p.x+p.w>s)p.w=s-p.x}var D=t.x-p.x,z=t.y-Math.max(p.y,0),E=D+t.w-p.w,C=z+t.h-p.h;if(0<E*D){var A=Math[0>D?"max":"min"](D,E);if(h&&(8==n&&!q||9<=n))A=-A;t.x+=r.scrollLeft;r.scrollLeft+=A;t.x-=r.scrollLeft}0<C*z&&(t.y+=r.scrollTop,r.scrollTop+=Math[0>z?"max":"min"](z,C),t.y-=r.scrollTop);r=r!=m&&!y&&r.parentNode}}}catch(G){b.scrollIntoView(!1)}}};h.setObject("dojo.window",b);return b})},"dijit/a11y":function(){define("dijit/a11y","dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),
function(h,l,i,e,c,a,b,d){var g=d._isElementShown=function(b){var d=a.get(b);return"hidden"!=d.visibility&&"collapsed"!=d.visibility&&"none"!=d.display&&"hidden"!=c.get(b,"type")};d.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return c.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var d=a.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;b=d.body}catch(f){try{b=a.contentWindow.document.body}catch(g){return!1}}return b&&
("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}};var f=d.isTabNavigable=function(a){return c.get(a,"disabled")?!1:c.has(a,"tabIndex")?0<=c.get(a,"tabIndex"):d.hasDefaultTabStop(a)};d._getTabNavigable=function(a){function d(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var n,m,e,u,s,o,h={},i=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||
b("ie")&&"HTML"!==a.scopeName||!g(a))){if(f(a)){var j=+c.get(a,"tabIndex");if(!c.has(a,"tabIndex")||0==j)n||(n=a),m=a;else if(0<j){if(!e||j<u)u=j,e=a;if(!s||j>=o)o=j,s=a}j=d(a);c.get(a,"checked")&&j&&(h[j]=a)}"SELECT"!=a.nodeName.toUpperCase()&&i(a)}};g(a)&&i(a);return{first:h[d(n)]||n,last:h[d(m)]||m,lowest:h[d(e)]||e,highest:h[d(s)]||s}};d.getFirstInTabbingOrder=function(a,b){var f=d._getTabNavigable(e.byId(a,b));return f.lowest?f.lowest:f.first};d.getLastInTabbingOrder=function(a,b){var f=d._getTabNavigable(e.byId(a,
b));return f.last?f.last:f.highest};return{hasDefaultTabStop:d.hasDefaultTabStop,isTabNavigable:d.isTabNavigable,_getTabNavigable:d._getTabNavigable,getFirstInTabbingOrder:d.getFirstInTabbingOrder,getLastInTabbingOrder:d.getLastInTabbingOrder}})},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(h,l,i,e,c){var a={},b={},d={length:0,add:function(a){if(b[a.id])throw Error("Tried to register widget with id=="+
a.id+" but that id is already registered");b[a.id]=a;this.length++},remove:function(a){b[a]&&(delete b[a],this.length--)},byId:function(a){return"string"==typeof a?b[a]:a},byNode:function(a){return b[a.getAttribute("widgetId")]},toArray:function(){var a=[],d;for(d in b)a.push(b[d]);return a},getUniqueId:function(d){var f;do f=d+"_"+(d in a?++a[d]:a[d]=0);while(b[f]);return"dijit"==c._scopeName?f:c._scopeName+"_"+f},findWidgets:function(a,d){function c(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==
a.nodeType){var g=a.getAttribute("widgetId");g?(g=b[g])&&k.push(g):a!==d&&c(a)}}var k=[];c(a);return k},_destroyAll:function(){c._curFocus=null;c._prevFocus=null;c._activeStack=[];h.forEach(d.findWidgets(e.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var d=a.getAttribute&&a.getAttribute("widgetId");if(d)return b[d];a=a.parentNode}return null},_hash:b};return c.registry=d})},"dijit/_base/manager":function(){define("dijit/_base/manager",
["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(h,l,i,e,c){var a={};h.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),function(b){a[b]=e[b]});i.mixin(a,{defaultDuration:l.defaultDuration||200});i.mixin(c,a);return c})},"dijit/_Widget":function(){define("dijit/_Widget","dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n){function m(){}function q(a){return function(d,f,c,k){return d&&"string"==typeof f&&d[f]==m?d.on(f.substring(2).toLowerCase(),b.hitch(c,k)):a.apply(i,arguments)}}h.around(i,"connect",q);a.connect&&h.around(a,"connect",q);h=e("dijit._Widget",[j,k,n],{onClick:m,onDblClick:m,onKeyDown:m,onKeyPress:m,onKeyUp:m,onMouseDown:m,onMouseMove:m,onMouseOut:m,onMouseOver:m,onMouseLeave:m,onMouseEnter:m,onMouseUp:m,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
m&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===m?i.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(b,d){a.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(b,d)},attr:function(b,d){if(l.isDebug){var f=arguments.callee._ach||(arguments.callee._ach={}),c=(arguments.callee.caller||"unknown caller").toString();f[c]||(a.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+c,"","2.0"),f[c]=!0)}return 2<=arguments.length||"object"===typeof b?this.set.apply(this,arguments):this.get(b)},getDescendants:function(){a.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.",
"","2.0");return this.containerNode?d("[widgetId]",this.containerNode).map(f.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});c("dijit-legacy-requires")&&g(0,function(){require(["dijit/_base"])});return h})},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase","require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q,u,s,o,B,t,r,p){function y(a){return function(b){d[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}n.add("dijit-legacy-requires",!m.isAsync);n("dijit-legacy-requires")&&s(0,function(){h(["dijit/_base/manager"])});var v={};return a("dijit._WidgetBase",[o,r],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:y("lang"),dir:"",_setDirAttr:y("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,
domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:e.blankGif||h.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,d){this.srcNodeRef=b.byId(d);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,q.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=p.getUniqueId(this.declaredClass.replace(/\./g,
"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:t.doc);this.ownerDocumentBody=t.body(this.ownerDocument);p.add(this);this.buildRendering();var f;if(this.domNode){this._applyAttributes();var c=this.srcNodeRef;c&&c.parentNode&&this.domNode!==c&&(c.parentNode.replaceChild(this.domNode,c),f=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();f&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=
this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],d;for(d in this.attributeMap)b.push(d);var a=a.prototype,f;for(f in a)f in this.attributeMap||"_set"+f.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(f)}l.forEach(b,function(a){this.params&&a in this.params||this[a]&&this.set(a,this[a])},this);for(var c in this.params)this.set(c,this.params[c])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=
this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(l.map(a,function(a){return a+"Rtl"})));g.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,l.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&q.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},
destroy:function(a){function b(d){d.destroyRecursive?d.destroyRecursive(a):d.destroy&&d.destroy(a)}this._beingDestroyed=!0;this.uninitialize();l.forEach(this._connects,q.hitch(this,"disconnect"));l.forEach(this._supportingWidgets,b);this.domNode&&l.forEach(p.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);p.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?d.remove(this.domNode,
"widgetId"):f.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||f.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){l.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;q.isObject(a)?k.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,f){f=3<=arguments.length?f:this.attributeMap[a];
l.forEach(q.isArray(f)?f:[f],function(f){var c=this[f.node||f||"domNode"];switch(f.type||"attribute"){case "attribute":q.isFunction(b)&&(b=q.hitch(this,b));f=f.attribute?f.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;c.tagName?d.set(c,f,b):c.set(f,b);break;case "innerText":c.innerHTML="";c.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":c.innerHTML=b;break;case "class":g.replace(c,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?
this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);var f=this[d.s];if(q.isFunction(f))var c=f.apply(this,Array.prototype.slice.call(arguments,1));else{var f=this.focusNode&&!q.isFunction(this.focusNode)?"focusNode":"domNode",k=this[f].tagName,A;if(!(A=v[k])){A=this[f];var n={},g;for(g in A)n[g.toLowerCase()]=!0;A=v[k]=n}g=a in this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:d.l in A&&"function"!=typeof b||
/^aria-|^data-|^role$/.test(a)?f:null;null!=g&&this._attrToDom(a,b,g);this._set(a,b)}return c||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var d=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+d+"Attr",g:"_get"+d+"Attr",l:d.toLowerCase()}},_set:function(a,b){var d=this[a];this[a]=b;this._created&&b!==d&&(this._watchCallbacks&&this._watchCallbacks(a,d,b),this.emit("attrmodified-"+
a,{detail:{prevValue:d,newValue:b}}))},emit:function(a,b,d){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail={};b.detail.widget=this;var f,c=this["on"+a];c&&(f=c.apply(this,d?d:[b]));this._started&&!this._beingDestroyed&&u.emit(this.domNode,a.toLowerCase(),b);return f},on:function(a,b){var d=this._onMap(a);return d?i.after(this,d,b,!0):this.own(u(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,d=b._onMap;if(!d){var d=b._onMap=
{},f;for(f in b.prototype)/^on/.test(f)&&(d[f.replace(/^on/,"").toLowerCase()]=f)}return d["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?p.findWidgets(this.containerNode):[]},getParent:function(){return p.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,d){return this.own(c.connect(a,b,this,d))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(B.subscribe(a,
q.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:j.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=k.get(this.domNode,"display")},placeAt:function(a,d){var c=!a.tagName&&p.byId(a);c&&c.addChild&&(!d||"number"===typeof d)?c.addChild(this,d):(c=c?c.containerNode&&!/after|before|replace/.test(d||"")?c.containerNode:c.domNode:b.byId(a,this.ownerDocument),f.place(this.domNode,c,d),!this._started&&(this.getParent()||
{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var d=setTimeout(q.hitch(this,function(){d=null;this._destroyed||q.hitch(this,a)()}),b||0);return{remove:function(){d&&(clearTimeout(d),d=null);return null}}}})})},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,l,i){return i("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){h.forEach(arguments,
function(e){var c="destroyRecursive"in e?"destroyRecursive":"destroy"in e?"destroy":"remove";e._odh=l.before(this,"destroy",function(a){e._odh.remove();e[c](a)});l.after(e,c,function(){e._odh.remove()})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin","dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(h,l,i,e,c,a,b,d){h=e("dijit._OnDijitClickMixin",null,{connect:function(a,
b,c){return this.inherited(arguments,[a,"ondijitclick"==b?d:b,c])}});h.a11yclick=d;return h})},"dijit/a11yclick":function(){define("dijit/a11yclick","dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),function(h,l,i,e,c,a,b){function d(a){return(a.keyCode===i.ENTER||a.keyCode===i.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey}var g=null;c("dom-addeventlistener")?b.doc.addEventListener("keydown",function(a){g=a.target},!0):function(){var d=
function(a){g=a.srcElement};b.doc.attachEvent("onkeydown",d);a.addOnWindowUnload(function(){b.doc.detachEvent("onkeydown",d)})}();return function(a,b){if(/input|button/i.test(a.nodeName))return h(a,"click",b);var k=[h(a,"keydown",function(a){if(d(a))g=a.target,a.preventDefault()}),h(a,"keyup",function(a){d(a)&&a.target==g&&(g=null,h.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),h(a,"click",function(a){b.call(this,a)})];if(c("touch")){var n;k.push(h(a,"touchend",function(a){var b=a.target;n=
setTimeout(function(){n=null;h.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),h(a,"click",function(){n&&clearTimeout(n)}))}return{remove:function(){l.forEach(k,function(a){a.remove()});n&&(clearTimeout(n),n=null)}}}})},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(h,l,i,e){e.extend(l,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return i("dijit._FocusMixin",null,{_focusManager:h})})},"dojo/uacss":function(){define("dojo/uacss",["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(h,l,i,e,c){var a=c.doc.documentElement,b=e("ie"),d=e("opera"),g=Math.floor,f=e("ff"),c=h.boxModel.replace(/-/,""),b={dj_ie:b,dj_ie6:6==g(b),dj_ie7:7==g(b),dj_ie8:8==g(b),dj_ie9:9==g(b),dj_quirks:e("quirks"),dj_iequirks:b&&e("quirks"),dj_opera:d,dj_khtml:e("khtml"),dj_webkit:e("webkit"),dj_safari:e("safari"),dj_chrome:e("chrome"),
dj_gecko:e("mozilla"),dj_ff3:3==g(f)};b["dj_"+c]=!0;var j="",k;for(k in b)b[k]&&(j+=k+" ");a.className=l.trim(a.className+" "+j);i(90,function(){if(!h.isBodyLtr()){var b="dj_rtl dijitRtl "+j.replace(/ /g,"-rtl ");a.className=l.trim(a.className+" "+b+"dj_rtl dijitRtl "+j.replace(/ /g,"-rtl "))}});return e})},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(h,l,i,e){i(90,function(){l("highcontrast")&&h.add(e.body(),"dijit_a11y")});
return l})},"dojo/hccss":function(){define("dojo/hccss","require,./_base/config,./dom-class,./dom-construct,./dom-style,./has,./ready,./_base/window".split(","),function(h,l,i,e,c,a,b,d){a.add("highcontrast",function(){var a=d.doc.createElement("div");a.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(l.blankGif||h.toUrl("./resources/blank.gif"))+");";d.body().appendChild(a);var b=c.getComputedStyle(a),j=b.backgroundImage,
b=b.borderTopColor==b.borderRightColor||j&&("none"==j||"url(invalid-url:)"==j);e.destroy(a);return b});b(90,function(){a("highcontrast")&&i.add(d.body(),"dj_a11y")});return a})},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin","dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),function(h,l,i,e,c,a,b,d,g,f){var j=b("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,
_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(a){var b=this.declaredClass,d=this;return e.substitute(a,this,function(a,f){"!"==f.charAt(0)&&(a=h.getObject(f.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+" template:"+f);return null==a?"":"!"==f.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this.templateString)this.templateString=c(this.templatePath,{sanitize:!0});
var a=j.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(h.isString(a)){if(b=d.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b;this.inherited(arguments);this._attachTemplateNodes(b,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},_beforeFillContent:function(){},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},
_attachTemplateNodes:function(a,b){for(var d=h.isArray(a)?a:a.all||a.getElementsByTagName("*"),f=h.isArray(a)?0:-1;0>f||d[f];f++){var c=-1==f?a:d[f];if(!this.widgetsInTemplate||!b(c,"dojoType")&&!b(c,"data-dojo-type")){var g=b(c,"dojoAttachPoint")||b(c,"data-dojo-attach-point");if(g)for(var j=g.split(/\s*,\s*/);g=j.shift();)h.isArray(this[g])?this[g].push(c):this[g]=c,this._attachPoints.push(g);if(g=b(c,"dojoAttachEvent")||b(c,"data-dojo-attach-event"))for(var j=g.split(/\s*,\s*/),e=h.trim;g=j.shift();)if(g){var i=
null;-1!=g.indexOf(":")?(i=g.split(":"),g=e(i[0]),i=e(i[1])):g=e(g);i||(i=g);this._attachEvents.push(this.connect(c,l[g]||g,i))}}}},destroyRendering:function(){a.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];a.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});j._templateCache={};j.getCachedTemplate=function(a,b,f){var c=j._templateCache,g=a,h=c[g];if(h){try{if(!h.ownerDocument||h.ownerDocument==(f||document))return h}catch(o){}d.destroy(h)}a=
e.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return c[g]=a;b=d.toDom(a,f);if(1!=b.nodeType)throw Error("Invalid template: "+a);return c[g]=b};g("ie")&&f.addOnWindowUnload(function(){var a=j._templateCache,b;for(b in a){var f=a[b];"object"==typeof f&&d.destroy(f);delete a[b]}});h.extend(i,{dojoAttachEvent:"",dojoAttachPoint:""});return j})},"dojo/string":function(){define("dojo/string",["./_base/kernel","./_base/lang"],function(h,l){var i={};l.setObject("dojo.string",i);i.rep=function(e,c){if(0>=c||
!e)return"";for(var a=[];;){c&1&&a.push(e);if(!(c>>=1))break;e+=e}return a.join("")};i.pad=function(e,c,a,b){a||(a="0");e=""+e;c=i.rep(a,Math.ceil((c-e.length)/a.length));return b?e+c:c+e};i.substitute=function(e,c,a,b){b=b||h.global;a=a?l.hitch(b,a):function(a){return a};return e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(d,g,f){d=l.getObject(g,!1,c);f&&(d=l.getObject(f,!1,b).call(b,d,g));return a(d,g).toString()})};i.trim=String.prototype.trim?l.trim:function(e){for(var e=e.replace(/^\s+/,
""),c=e.length-1;0<=c;c--)if(/\S/.test(e.charAt(c))){e=e.substring(0,c+1);break}return e};return i})},"dojo/cache":function(){define("dojo/cache",["./_base/kernel","./text"],function(h){return h.cache})},"dojo/text":function(){define("dojo/text",["./_base/kernel","require","./has","./_base/xhr"],function(h,l,i,e){var c;c=function(a,b,d){e("GET",{url:a,sync:!!b,load:d,headers:h.config.textPluginHeaders||{}})};var a={},b=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},d={},g={};h.cache=function(d,g,k){var n;"string"==typeof d?/\//.test(d)?(n=d,k=g):n=l.toUrl(d.replace(/\./g,"/")+(g?"/"+g:"")):(n=d+"",k=g);d=void 0!=k&&"string"!=typeof k?k.value:k;k=k&&k.sanitize;if("string"==typeof d)return a[n]=d,k?b(d):d;if(null===d)return delete a[n],null;n in a||c(n,!0,function(b){a[n]=b});return k?b(a[n]):a[n]};return{dynamic:!0,normalize:function(a,b){var d=a.split("!"),c=d[0];return(/^\./.test(c)?
b(c):c)+(d[1]?"!"+d[1]:"")},load:function(f,j,k){var f=f.split("!"),n=1<f.length,m=f[0],e=j.toUrl(f[0]),f="url:"+e,h=d,s=function(a){k(n?b(a):a)};m in a?h=a[m]:f in j.cache?h=j.cache[f]:e in a&&(h=a[e]);if(h===d)if(g[e])g[e].push(s);else{var o=g[e]=[s];c(e,!j.async,function(b){a[m]=a[e]=b;for(var d=0;d<o.length;)o[d++](b);delete g[e]})}else s(h)}}})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(h,l,i){return l("dijit._Container",
null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(e,c){var a=this.containerNode;if(c&&"number"==typeof c){var b=this.getChildren();if(b&&b.length>=c)a=b[c-1].domNode,c="after"}i.place(e.domNode,a,c);this._started&&!e._started&&e.startup()},removeChild:function(e){"number"==typeof e&&(e=this.getChildren()[e]);if(e)(e=e.domNode)&&e.parentNode&&e.parentNode.removeChild(e)},hasChildren:function(){return 0<this.getChildren().length},
_getSiblingOfChild:function(e,c){var a=this.getChildren(),b=h.indexOf(this.getChildren(),e);return a[b+c]},getIndexOfChild:function(e){return h.indexOf(this.getChildren(),e)}})})},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(h,l){return h("dijit._Contained",null,{_getSibling:function(h){var e=this.domNode;do e=e[h+"Sibling"];while(e&&1!=e.nodeType);return e&&l.byNode(e)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var h=this.getParent();return!h||!h.getIndexOfChild?-1:h.getIndexOfChild(this)}})})},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin","dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/_base/lang,dojo/on,dojo/ready,dojo/_base/window,./registry".split(","),function(h,l,i,e,c,a,b,d,g){l=l("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);h.forEach("disabled,readOnly,checked,selected,focused,state,hovering,active,_opened".split(","),
function(a){this.watch(a,c.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":this._set("active",!0);break;
case "mouseup":case "touchend":this._set("active",!1)}},_setStateClass:function(){function a(d){b=b.concat(h.map(b,function(a){return a+d}),"dijit"+d)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(d);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");
var d=this.stateNode||this.domNode,c={};h.forEach(d.className.split(" "),function(a){c[a]=!0});"_stateClasses"in this&&h.forEach(this._stateClasses,function(a){delete c[a]});h.forEach(b,function(a){c[a]=!0});var g=[],e;for(e in c)g.push(e);d.className=g.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,d){function c(d){e.toggle(a,b+"Active",d)}if(!this.disabled&&!this.readOnly)switch(d.type){case "mouseover":e.toggle(a,b+"Hover",!0);break;case "mouseout":e.toggle(a,b+"Hover",!1);
c(!1);break;case "mousedown":case "touchstart":c(!0);break;case "mouseup":case "touchend":c(!1);break;case "focus":case "focusin":e.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":e.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});b(function(){function b(a){if(!i.isDescendant(a.relatedTarget,a.target))for(var d=a.target;d&&d!=a.relatedTarget;d=d.parentNode)if(d._cssState){var c=g.getEnclosingWidget(d);c&&(d==c.domNode?c._cssMouseEvent(a):c._subnodeCssMouseEvent(d,
d._cssState,a))}}function c(a){a.target=a.srcElement;b(a)}var k=d.body();h.forEach("mouseover,mouseout,mousedown,touchstart,mouseup,touchend".split(","),function(a){k.addEventListener?k.addEventListener(a,b,!0):k.attachEvent("on"+a,c)});a(k,"focusin, focusout",function(a){var b=a.target;b._cssState&&!b.getAttribute("widgetId")&&g.getEnclosingWidget(b)._subnodeCssMouseEvent(b,b._cssState,a)})});return l})},"url:dijit/templates/TreeNode.html":'<div class="dijitTreeNode" role="presentation"\n\t><div data-dojo-attach-point="rowNode" class="dijitTreeRow dijitInline" role="presentation"\n\t\t><div data-dojo-attach-point="indentNode" class="dijitInline"></div\n\t\t><img src="${_blankGif}" alt="" data-dojo-attach-point="expandoNode" class="dijitTreeExpando" role="presentation"\n\t\t/><span data-dojo-attach-point="expandoNodeText" class="dijitExpandoText" role="presentation"\n\t\t></span\n\t\t><span data-dojo-attach-point="contentNode"\n\t\t\tclass="dijitTreeContent" role="presentation">\n\t\t\t<img src="${_blankGif}" alt="" data-dojo-attach-point="iconNode" class="dijitIcon dijitTreeIcon" role="presentation"\n\t\t\t/><span data-dojo-attach-point="labelNode" class="dijitTreeLabel" role="treeitem" tabindex="-1" aria-selected="false"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeContainer" role="presentation" style="display: none;"></div>\n</div>\n',
"url:dijit/templates/Tree.html":'<div class="dijitTree dijitTreeContainer" role="tree">\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" data-dojo-attach-point="indentDetector"></div>\n</div>\n',"dijit/tree/TreeStoreModel":function(){define("dijit/tree/TreeStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(h,l,i,e){return i("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",
root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(c){e.mixin(this,c);this.connects=[];c=this.store;if(!c.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");if(c.getFeatures()["dojo.data.api.Notification"])this.connects=this.connects.concat([l.after(c,"onNew",e.hitch(this,"onNewItem"),!0),l.after(c,"onDelete",e.hitch(this,"onDeleteItem"),!0),l.after(c,"onSet",e.hitch(this,"onSetItem"),!0)])},destroy:function(){for(var c;c=
this.connects.pop();)c.remove()},getRoot:function(c,a){this.root?c(this.root):this.store.fetch({query:this.query,onComplete:e.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];c(this.root)}),onError:a})},mayHaveChildren:function(c){return h.some(this.childrenAttrs,function(a){return this.store.hasAttribute(c,a)},this)},getChildren:function(c,a,b){var d=this.store;if(d.isItemLoaded(c)){for(var g=
[],f=0;f<this.childrenAttrs.length;f++)var j=d.getValues(c,this.childrenAttrs[f]),g=g.concat(j);var k=0;this.deferItemLoadingUntilExpand||h.forEach(g,function(a){d.isItemLoaded(a)||k++});0==k?a(g):h.forEach(g,function(c,f){d.isItemLoaded(c)||d.loadItem({item:c,onItem:function(b){g[f]=b;0==--k&&a(g)},onError:b})})}else{var n=e.hitch(this,arguments.callee);d.loadItem({item:c,onItem:function(d){n(d,a,b)},onError:b})}},isItem:function(c){return this.store.isItem(c)},fetchItemByIdentity:function(c){this.store.fetchItemByIdentity(c)},
getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return this.labelAttr?this.store.getValue(c,this.labelAttr):this.store.getLabel(c)},newItem:function(c,a,b){var d={parent:a,attribute:this.childrenAttrs[0]},g;this.newItemIdAttr&&c[this.newItemIdAttr]?this.fetchItemByIdentity({identity:c[this.newItemIdAttr],scope:this,onItem:function(f){f?this.pasteItem(f,null,a,!0,b):(g=this.store.newItem(c,d))&&void 0!=b&&this.pasteItem(g,a,a,!1,b)}}):(g=this.store.newItem(c,d))&&void 0!=
b&&this.pasteItem(g,a,a,!1,b)},pasteItem:function(c,a,b,d,g){var f=this.store,j=this.childrenAttrs[0];a&&h.forEach(this.childrenAttrs,function(b){if(f.containsValue(a,b,c)){if(!d){var g=h.filter(f.getValues(a,b),function(a){return a!=c});f.setValues(a,b,g)}j=b}});if(b)if("number"==typeof g){var k=f.getValues(b,j).slice();k.splice(g,0,c);f.setValues(b,j,k)}else f.setValues(b,j,f.getValues(b,j).concat(c))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(c,
a){a&&this.getChildren(a.item,e.hitch(this,function(b){this.onChildrenChange(a.item,b)}))},onDeleteItem:function(c){this.onDelete(c)},onSetItem:function(c,a){if(-1!=h.indexOf(this.childrenAttrs,a))this.getChildren(c,e.hitch(this,function(a){this.onChildrenChange(c,a)}));else this.onChange(c)}})})},"dijit/tree/ForestStoreModel":function(){define("dijit/tree/ForestStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(h,l,i,e,c){return l("dijit.tree.ForestStoreModel",
c,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,d){a===this.root?this.root.children?b(this.root.children):this.store.fetch({query:this.query,onComplete:e.hitch(this,function(a){this.root.children=a;b(a)}),onError:d}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},
fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope||i.global;a.onItem&&a.onItem.call(b,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,d){return b===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,d,c,f){if(b===
this.root&&!c)this.onLeaveRoot(a);this.inherited(arguments,[a,b===this.root?null:b,d===this.root?null:d,c,f]);if(d===this.root)this.onAddToRoot(a)},onAddToRoot:function(){},onLeaveRoot:function(){},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:e.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||h.some(a,function(a,c){return b[c]!=a}))this.onChildrenChange(this.root,b)})})},onNewItem:function(a,b){this._requeryTop();this.inherited(arguments)},
onDeleteItem:function(a){-1!=h.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,b,d,c){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dijit/tree/_dndSelector","dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/Deferred,dojo/_base/kernel,dojo/_base/lang,dojo/cookie,dojo/mouse,dojo/on,dojo/touch,./_dndContainer".split(","),function(h,l,i,e,c,a,b,d,g,f,j){return i("dijit.tree._dndSelector",
j,{constructor:function(){this.selection={};this.anchor=null;if(!this.cookieName&&this.tree.id)this.cookieName=this.tree.id+"SaveSelectedCookie";this.events.push(g(this.tree.domNode,f.press,a.hitch(this,"onMouseDown")),g(this.tree.domNode,f.release,a.hitch(this,"onMouseUp")),g(this.tree.domNode,f.move,a.hitch(this,"onMouseMove")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,d;for(d in b)a.push(b[d]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);
this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));if(b)this.anchor=a;return a},removeTreeNode:function(a){this.setSelection(this._setDifference(this.getSelectedTreeNodes(),[a]));return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(b){var d=this.getSelectedTreeNodes();h.forEach(this._setDifference(d,b),a.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));
h.forEach(this._setDifference(b,d),a.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){h.forEach(b,function(a){a.__exclude__=!0});var d=h.filter(a,function(a){return!a.__exclude__});h.forEach(b,function(a){delete a.__exclude__});return d},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),d=[],c=[],f=[];h.forEach(a,function(a){var b=a.getTreePath(),g=this.tree.model;c.push(a);d.push(b);b=h.map(b,
function(a){return g.getIdentity(a)},this);f.push(b.join("/"))},this);a=h.map(c,function(a){return a.item});this.tree._set("paths",d);this.tree._set("path",d[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null);this.tree.persist&&0<f.length&&b(this.cookieName,f.join(","),{expires:365})},_getSavedPaths:function(){var a=this.tree;if(a.persist&&a.dndController.cookieName){var d=[];(a=b(a.dndController.cookieName))&&
(d=h.map(a.split(","),function(a){return a.split("/")}));return d}},onMouseDown:function(a){if(!(!this.current||this.tree.isExpandoNode(a.target,this.current)||"touchstart"!=a.type&&!d.isLeft(a))){a.preventDefault();var b=this.current,c=l.isCopyKey(a),f=b.id;!this.singular&&!a.shiftKey&&this.selection[f]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(b,c,a.shiftKey))}},onMouseUp:function(a){if(this._doDeselect)this._doDeselect=!1,this.userSelect(this.current,l.isCopyKey(a),a.shiftKey)},
onMouseMove:function(){this._doDeselect=!1},_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var d=doc.createRange();d.setStartBefore(a);var c=doc.createRange();c.setStartBefore(b);return d.compareBoundaryPoints(d.END_TO_END,c)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(a,b,d){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(d&&this.anchor){d=this.anchor;0>this._compareNodes(this.anchor.rowNode,a.rowNode)?b=d:(b=a,a=d);for(d=[];b!=a;)d.push(b),b=this.tree._getNextNode(b);d.push(a);this.setSelection(d)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
b){var b=b||c.global,d;for(d in this.selection)a.call(b,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dijit/tree/_dndContainer","dojo/aspect,dojo/_base/declare,dojo/dom-class,dojo/_base/event,dojo/_base/lang,dojo/on,dojo/touch".split(","),function(h,l,i,e,c,a,b){return l("dijit.tree._dndContainer",null,{constructor:function(d,g){this.tree=d;this.node=d.domNode;c.mixin(this,g);this.current=null;this.containerState="";i.add(this.node,"dojoDndContainer");this.events=[a(this.node,
b.enter,c.hitch(this,"onOverEvent")),a(this.node,b.leave,c.hitch(this,"onOutEvent")),h.after(this.tree,"_onNodeMouseEnter",c.hitch(this,"onMouseOver"),!0),h.after(this.tree,"_onNodeMouseLeave",c.hitch(this,"onMouseOut"),!0),a(this.node,"dragstart",c.hitch(e,"stop")),a(this.node,"selectstart",c.hitch(e,"stop"))]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,
b){var c="dojoDnd"+a,j=a.toLowerCase()+"State";i.replace(this.node,c+b,c+this[j]);this[j]=b},_addItemClass:function(a,b){i.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){i.remove(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/tree/ObjectStoreModel":function(){define("dijit/tree/ObjectStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/when"],function(h,
l,i,e,c){return i("dijit.tree.ObjectStoreModel",null,{store:null,labelAttr:"name",root:null,query:null,constructor:function(a){e.mixin(this,a);this.childrenCache={}},destroy:function(){for(var a in this.childrenCache)this.childrenCache[a].close&&this.childrenCache[a].close()},getRoot:function(a,b){if(this.root)a(this.root);else{var d;c(d=this.store.query(this.query),e.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");
this.root=b[0];a(this.root);d.observe&&d.observe(e.hitch(this,function(a){this.onChange(a)}),!0)}),b)}},mayHaveChildren:function(){return!0},getChildren:function(a,b,d){var g=this.store.getIdentity(a);this.childrenCache[g]?c(this.childrenCache[g],b,d):c(this.childrenCache[g]=this.store.getChildren(a),e.hitch(this,function(d){d.observe&&d.observe(e.hitch(this,function(b,c,g){this.onChange(b);if(c!=g)this.onChildrenChange(a,d)}),!0);b(d)}),d)},isItem:function(){return!0},fetchItemByIdentity:function(a){this.store.get(a.identity).then(e.hitch(a.scope,
a.onItem),e.hitch(a.scope,a.onError))},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,b,d,c){return this.store.put(a,{parent:b,before:c})},pasteItem:function(a,b,d,c,f,j){c||(c=[].concat(this.childrenCache[this.getIdentity(b)]),f=h.indexOf(c,a),c.splice(f,1),this.onChildrenChange(b,c));return this.store.put(a,{overwrite:!0,parent:d,before:j})},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},
"dijit/tree/dndSource":function(){define("dijit/tree/dndSource","dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/_base/lang,dojo/on,dojo/touch,dojo/topic,dojo/dnd/Manager,./_dndSelector".split(","),function(h,l,i,e,c,a,b,d,g,f,j){return i("dijit.tree.dndSource",j,{isSource:!0,accept:["text","treeNode"],copyOnly:!1,dragThreshold:5,betweenThreshold:0,generateText:!0,constructor:function(b,d){d||(d={});a.mixin(this,d);var c=d.accept instanceof Array?d.accept:
["text","treeNode"];this.accept=null;if(c.length){this.accept={};for(var f=0;f<c.length;++f)this.accept[c[f]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.dropPosition="";this._lastY=this._lastX=0;this.sourceState="";this.isSource&&e.add(this.node,"dojoDndSource");this.targetState="";this.accept&&e.add(this.node,"dojoDndTarget");this.topics=[g.subscribe("/dnd/source/over",a.hitch(this,"onDndSourceOver")),g.subscribe("/dnd/start",a.hitch(this,"onDndStart")),g.subscribe("/dnd/drop",
a.hitch(this,"onDndDrop")),g.subscribe("/dnd/cancel",a.hitch(this,"onDndCancel"))]},checkAcceptance:function(){return!0},copyState:function(a){return this.copyOnly||a},destroy:function(){this.inherited(arguments);for(var a;a=this.topics.pop();)a.remove();this.targetAnchor=null},_onDragMouse:function(a,b){var d=f.manager(),g=this.targetAnchor,j=this.current,e=this.dropPosition,h="Over";if(j&&0<this.betweenThreshold){if(!this.targetBox||g!=j)this.targetBox=c.position(j.rowNode,!0);a.pageY-this.targetBox.y<=
this.betweenThreshold?h="Before":a.pageY-this.targetBox.y>=this.targetBox.h-this.betweenThreshold&&(h="After")}if(b||j!=g||h!=e){g&&this._removeItemClass(g.rowNode,e);j&&this._addItemClass(j.rowNode,h);if(j)if(j==this.tree.rootNode&&"Over"!=h)d.canDrop(!1);else{g=!1;if(d.source==this)for(var i in this.selection)if(this.selection[i].item===j.item){g=!0;break}g?d.canDrop(!1):this.checkItemAcceptance(j.rowNode,d.source,h.toLowerCase())&&!this._isParentChildDrop(d.source,j.rowNode)?d.canDrop(!0):d.canDrop(!1)}else d.canDrop(!1);
this.targetAnchor=j;this.dropPosition=h}},onMouseMove:function(a){if(!(this.isDragging&&"Disabled"==this.targetState)){this.inherited(arguments);var b=f.manager();if(this.isDragging)this._onDragMouse(a);else if(this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>=this.dragThreshold||Math.abs(a.pageY-this._lastY)>=this.dragThreshold)){var d=this.getSelectedTreeNodes();if(d.length){if(1<d.length){var c=this.selection,g=0,j=[],e,i;a:for(;e=d[g++];){for(i=e.getParent();i&&i!==this.tree;i=i.getParent())if(c[i.id])continue a;
j.push(e)}d=j}d=h.map(d,function(a){return a.domNode});b.startDrag(this,d,this.copyState(l.isCopyKey(a)));this._onDragMouse(a,!0)}}}},onMouseDown:function(a){this.mouseDown=!0;this.mouseButton=a.button;this._lastX=a.pageX;this._lastY=a.pageY;this.inherited(arguments)},onMouseUp:function(a){if(this.mouseDown)this.mouseDown=!1,this.inherited(arguments)},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor()},checkItemAcceptance:function(){return!0},onDndSourceOver:function(a){this!=
a?(this.mouseDown=!1,this._unmarkTargetAnchor()):this.isDragging&&f.manager().canDrop(!1)},onDndStart:function(a,b,d){this.isSource&&this._changeState("Source",this==a?d?"Copied":"Moved":"");this._changeState("Target",this.checkAcceptance(a,b)?"":"Disabled");this==a&&f.manager().overSource(this);this.isDragging=!0},itemCreator:function(a){return h.map(a,function(a){return{id:a.id,name:a.textContent||a.innerText||""}})},onDndDrop:function(a,b,d){if("Over"==this.containerState){var c=this.tree,f=c.model,
g=this.targetAnchor;this.isDragging=!1;var j,e,i;j=g&&g.item||c.item;"Before"==this.dropPosition||"After"==this.dropPosition?(j=g.getParent()&&g.getParent().item||c.item,e=g.getIndexInParent(),"After"==this.dropPosition?(e=g.getIndexInParent()+1,i=g.getNextSibling()&&g.getNextSibling().item):i=g.item):j=g&&g.item||c.item;var l;h.forEach(b,function(c,q){var v=a.getItem(c.id);if(-1!=h.indexOf(v.type,"treeNode"))var w=v.data,x=w.item,D=w.getParent().item;a==this?("number"==typeof e&&j==D&&w.getIndexInParent()<
e&&(e-=1),f.pasteItem(x,D,j,d,e,i)):f.isItem(x)?f.pasteItem(x,D,j,d,e,i):(l||(l=this.itemCreator(b,g.rowNode,a)),f.newItem(l[q],j,e,i))},this);this.tree._expandNode(g)}this.onDndCancel()},onDndCancel:function(){this._unmarkTargetAnchor();this.mouseDown=this.isDragging=!1;delete this.mouseButton;this._changeState("Source","");this._changeState("Target","")},onOverEvent:function(){this.inherited(arguments);f.manager().overSource(this)},onOutEvent:function(){this._unmarkTargetAnchor();var a=f.manager();
this.isDragging&&a.canDrop(!1);a.outSource(this);this.inherited(arguments)},_isParentChildDrop:function(a,b){if(!a.tree||a.tree!=this.tree)return!1;for(var d=a.tree.domNode,c=a.selection,f=b.parentNode;f!=d&&!c[f.id];)f=f.parentNode;return f.id&&c[f.id]},_unmarkTargetAnchor:function(){if(this.targetAnchor)this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition),this.dropPosition=this.targetBox=this.targetAnchor=null},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")}})})},
"dojo/dnd/Manager":function(){define("dojo/dnd/Manager","../_base/array,../_base/declare,../_base/event,../_base/lang,../_base/window,../dom-class,../Evented,../has,../keys,../on,../topic,../touch,./common,./autoscroll,./Avatar".split(","),function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q){var u=l("dojo.dnd.Manager",[b],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:d("touch")?0:16,OFFSET_Y:d("touch")?-64:16,overSource:function(a){if(this.avatar)this.target=
a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update();j.publish("/dnd/source/over",a)},outSource:function(a){if(this.avatar){if(this.target==a)this.target=null,this.canDropFlag=!1,this.avatar.update(),j.publish("/dnd/source/over",null)}else j.publish("/dnd/source/over",null)},startDrag:function(b,d,g){m.autoScrollStart(c.doc);this.source=b;this.nodes=d;this.copy=Boolean(g);this.avatar=this.makeAvatar();c.body().appendChild(this.avatar.node);j.publish("/dnd/start",
b,d,this.copy);this.events=[f(c.doc,k.move,e.hitch(this,"onMouseMove")),f(c.doc,k.release,e.hitch(this,"onMouseUp")),f(c.doc,"keydown",e.hitch(this,"onKeyDown")),f(c.doc,"keyup",e.hitch(this,"onKeyUp")),f(c.doc,"dragstart",i.stop),f(c.body(),"selectstart",i.stop)];a.add(c.body(),"dojoDnd"+(g?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a)this.canDropFlag=a,this.avatar.update()},stopDrag:function(){a.remove(c.body(),["dojoDndCopy","dojoDndMove"]);h.forEach(this.events,
function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new q(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;if(b)m.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(n.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b);d("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&
this.canDropFlag){var b=Boolean(this.source.copyState(n.getCopyKeyState(a)));j.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);j.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else j.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case g.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case g.ESCAPE:j.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==
g.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(b){this.copy=b;this.source._markDndStatus(this.copy);this.updateAvatar();a.replace(c.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});n._manager=null;u.manager=n.manager=function(){if(!n._manager)n._manager=new u;return n._manager};return u})},"dojo/dnd/common":function(){define("dojo/dnd/common",["../_base/connect","../_base/kernel","../_base/lang","../dom"],
function(h,l,i,e){var c={};c.getCopyKeyState=h.isCopyKey;c._uniqueId=0;c.getUniqueId=function(){var a;do a=l._scopeName+"Unique"+ ++c._uniqueId;while(e.byId(a));return a};c._empty={};c.isFormElement=function(a){a=a.target;if(3==a.nodeType)a=a.parentNode;return 0<=" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")};i.mixin(i.getObject("dojo.dnd",!0),c);return c})},"dojo/dnd/autoscroll":function(){define("dojo/dnd/autoscroll","../_base/lang,../sniff,../_base/window,../dom-geometry,../dom-style,../window".split(","),
function(h,l,i,e,c,a){var b={};h.setObject("dojo.dnd.autoscroll",b);b.getViewport=a.getBox;b.V_TRIGGER_AUTOSCROLL=32;b.H_TRIGGER_AUTOSCROLL=32;b.V_AUTOSCROLL_VALUE=16;b.H_AUTOSCROLL_VALUE=16;var d,g=i.doc,f=Infinity,j=Infinity;b.autoScrollStart=function(b){g=b;d=a.getBox(g);b=i.body(g).parentNode;f=Math.max(b.scrollHeight-d.h,0);j=Math.max(b.scrollWidth-d.w,0)};b.autoScroll=function(c){var e=d||a.getBox(g),h=i.body(g).parentNode,l=0,u=0;c.clientX<b.H_TRIGGER_AUTOSCROLL?l=-b.H_AUTOSCROLL_VALUE:c.clientX>
e.w-b.H_TRIGGER_AUTOSCROLL&&(l=Math.min(b.H_AUTOSCROLL_VALUE,j-h.scrollLeft));c.clientY<b.V_TRIGGER_AUTOSCROLL?u=-b.V_AUTOSCROLL_VALUE:c.clientY>e.h-b.V_TRIGGER_AUTOSCROLL&&(u=Math.min(b.V_AUTOSCROLL_VALUE,f-h.scrollTop));window.scrollBy(l,u)};b._validNodes={div:1,p:1,td:1};b._validOverflow={auto:1,scroll:1};b.autoScrollNodes=function(a){for(var d,f,g,j,h,o,B=0,t=0,r=a.target;r;){if(1==r.nodeType&&r.tagName.toLowerCase()in b._validNodes){g=c.getComputedStyle(r);j=g.overflow.toLowerCase()in b._validOverflow;
h=g.overflowX.toLowerCase()in b._validOverflow;o=g.overflowY.toLowerCase()in b._validOverflow;if(j||h||o)d=e.getContentBox(r,g),f=e.position(r,!0);if(j||h){g=Math.min(b.H_TRIGGER_AUTOSCROLL,d.w/2);h=a.pageX-f.x;if(l("webkit")||l("opera"))h+=i.body().scrollLeft;B=0;0<h&&h<d.w&&(h<g?B=-g:h>d.w-g&&(B=g),r.scrollLeft+=B)}if(j||o){j=Math.min(b.V_TRIGGER_AUTOSCROLL,d.h/2);o=a.pageY-f.y;if(l("webkit")||l("opera"))o+=i.body().scrollTop;t=0;0<o&&o<d.h&&(o<j?t=-j:o>d.h-j&&(t=j),r.scrollTop+=t)}if(B||t)return}try{r=
r.parentNode}catch(p){r=null}}b.autoScroll(a)};return b})},"dojo/dnd/Avatar":function(){define("dojo/dnd/Avatar","../_base/declare,../_base/window,../dom,../dom-attr,../dom-class,../dom-construct,../hccss,../query".split(","),function(h,l,i,e,c,a,b,d){return h("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){var d=a.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),c=this.manager.source,j,h=a.create("tbody",
null,d),n=a.create("tr",null,h),m=a.create("td",null,n),i=Math.min(5,this.manager.nodes.length),l=0;b("highcontrast")&&a.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},m);a.create("span",{innerHTML:c.generateText?this._generateText():""},m);for(e.set(n,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});l<i;++l)c.creator?j=c._normalizedCreator(c.getItem(this.manager.nodes[l].id).data,"avatar").node:(j=this.manager.nodes[l].cloneNode(!0),"tr"==j.tagName.toLowerCase()&&(n=a.create("table"),
a.create("tbody",null,n).appendChild(j),j=n)),j.id="",n=a.create("tr",null,h),m=a.create("td",null,n),m.appendChild(j),e.set(n,{"class":"dojoDndAvatarItem",style:{opacity:(9-l)/10}});this.node=d},destroy:function(){a.destroy(this.node);this.node=!1},update:function(){c.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(b("highcontrast")){var a=i.byId("a11yIcon"),f="+";this.manager.canDropFlag&&!this.manager.copy?f="< ":!this.manager.canDropFlag&&!this.manager.copy?f="o":this.manager.canDropFlag||
(f="x");a.innerHTML=f}d("tr.dojoDndAvatarHeader td span"+(b("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},"dijit/Menu":function(){define("dijit/Menu","require,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-geometry,dojo/dom-style,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window,dojo/window,./popup,./DropDownMenu,dojo/ready".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q,u,s){k("dijit-legacy-requires")&&s(0,function(){h(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return i("dijit.Menu",u,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):l.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return m.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&n.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&n.doc.frames[a.name]&&n.doc.frames[a.name].document||null},bindDomNode:function(b){var b=c.byId(b,this.ownerDocument),d;if("iframe"==b.tagName.toLowerCase()){var h=b,k=this._iframeContentWindow(h);d=n.body(k.document)}else d=b==n.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var m={node:b,iframe:h};
a.set(b,"_dijitMenu"+this.id,this._bindings.push(m));var i=f.hitch(this,function(a){var b=this.selector,d=b?function(a){return j.selector(b,a)}:function(a){return a},c=this;return[j(a,d(this.leftClickToOpen?"click":"contextmenu"),function(a){e.stop(a);c._scheduleOpen(this,h,{x:a.pageX,y:a.pageY})}),j(a,d("keydown"),function(a){a.shiftKey&&a.keyCode==g.F10&&(e.stop(a),c._scheduleOpen(this,h))})]});m.connects=d?i(d):[];if(h)m.onloadHandler=f.hitch(this,function(){var a=this._iframeContentWindow(h);
d=n.body(a.document);m.connects=i(d)}),h.addEventListener?h.addEventListener("load",m.onloadHandler,!1):h.attachEvent("onload",m.onloadHandler)},unBindDomNode:function(b){var d;try{d=c.byId(b,this.ownerDocument)}catch(f){return}b="_dijitMenu"+this.id;if(d&&a.has(d,b)){for(var g=a.get(d,b)-1,j=this._bindings[g],e;e=j.connects.pop();)e.remove();(e=j.iframe)&&(e.removeEventListener?e.removeEventListener("load",j.onloadHandler,!1):e.detachEvent("onload",j.onloadHandler));a.remove(d,b);delete this._bindings[g]}},
_scheduleOpen:function(a,b,d){if(!this._openTimer)this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:d})},1)},_openMyself:function(a){function f(){i.refocus&&l&&l.focus();q.close(i)}var g=a.target,j=a.iframe,a=a.coords;this.currentTarget=g;if(a){if(j){var g=b.position(j,!0),e=this._iframeContentWindow(j),e=b.docScroll(e.document),h=d.getComputedStyle(j),n=d.toPixelValue,m=(k("ie")&&k("quirks")?0:n(j,h.paddingLeft))+(k("ie")&&k("quirks")?n(j,h.borderLeftWidth):
0),j=(k("ie")&&k("quirks")?0:n(j,h.paddingTop))+(k("ie")&&k("quirks")?n(j,h.borderTopWidth):0);a.x+=g.x+m-e.x;a.y+=g.y+j-e.y}}else a=b.position(g,!0),a.x+=10,a.y+=10;var i=this,j=this._focusManager.get("prevNode"),g=this._focusManager.get("curNode"),l=!g||c.isDescendant(g,this.domNode)?j:g;q.open({popup:this,x:a.x,y:a.y,onExecute:f,onCancel:f,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);q.close(this)}},destroy:function(){l.forEach(this._bindings,
function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dijit/popup","dojo/_base/array,dojo/aspect,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,./place,./BackgroundIframe,./main".split(","),function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q,u,s){function o(){this._popupWrapper&&(b.destroy(this._popupWrapper),delete this._popupWrapper)}
e=e(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_createWrapper:function(a){var d=a._popupWrapper,c=a.domNode;if(!d)d=b.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},a.ownerDocumentBody),d.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=d,l.after(a,"destroy",o,!0);return d},moveOffScreen:function(a){a=this._createWrapper(a);g.set(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=this._createWrapper(a);
g.set(a,"display","none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var g=this._stack,e=b.popup,h=b.orient||["below","below-alt","above","above-alt"],l=b.parent?b.parent.isLeftToRight():d.isBodyLtr(e.ownerDocument),o=b.around,s=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;g.length&&(!b.parent||!c.isDescendant(b.parent.domNode,g[g.length-1].widget.domNode));)this.close(g[g.length-1].widget);
var x=this._createWrapper(e);a.set(x,{id:s,style:{zIndex:this._beginZIndex+g.length},"class":"dijitPopup "+(e.baseClass||e["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});if((m("ie")||m("mozilla"))&&!e.bgIframe)e.bgIframe=new u(x);h=o?q.around(x,o,h,l,e.orient?k.hitch(e,"orient"):null):q.at(x,b,"R"==h?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding);x.style.display="";x.style.visibility="visible";e.domNode.style.visibility="visible";l=[];l.push(n(x,i._keypress,
k.hitch(this,function(a){if(a.charOrCode==j.ESCAPE&&b.onCancel)f.stop(a),b.onCancel();else if(a.charOrCode===j.TAB&&(f.stop(a),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));e.onCancel&&b.onCancel&&l.push(e.on("cancel",b.onCancel));l.push(e.on(e.onExecute?"execute":"change",k.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));g.push({widget:e,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:l});if(e.onOpen)e.onOpen(h);return h},
close:function(a){for(var b=this._stack;a&&h.some(b,function(b){return b.widget==a})||!a&&b.length;){var d=b.pop(),c=d.widget,f=d.onClose;if(c.onClose)c.onClose();for(var g;g=d.handlers.pop();)g.remove();c&&c.domNode&&this.hide(c);f&&f()}}});return s.popup=new e})},"dijit/place":function(){define("dijit/place","dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel,dojo/_base/window,dojo/window,./main".split(","),function(h,l,i,e,c,a,b){function d(b,d,j,e){var n=a.getBox(b.ownerDocument);
(!b.parentNode||"body"!=(""+b.parentNode.tagName).toLowerCase())&&c.body(b.ownerDocument).appendChild(b);var m=null;h.some(d,function(a){var d=a.corner,c=a.pos,f=0,h={w:{L:n.l+n.w-c.x,R:c.x-n.l,M:n.w}[d.charAt(1)],h:{T:n.t+n.h-c.y,B:c.y-n.t,M:n.h}[d.charAt(0)]},i=b.style;i.left=i.right="auto";j&&(f=j(b,a.aroundCorner,d,h,e),f="undefined"==typeof f?0:f);var q=b.style,y=q.display,v=q.visibility;if("none"==q.display)q.visibility="hidden",q.display="";i=l.position(b);q.display=y;q.visibility=v;y={L:c.x,
R:c.x-i.w,M:Math.max(n.l,Math.min(n.l+n.w,c.x+(i.w>>1))-i.w)}[d.charAt(1)];v={T:c.y,B:c.y-i.h,M:Math.max(n.t,Math.min(n.t+n.h,c.y+(i.h>>1))-i.h)}[d.charAt(0)];c=Math.max(n.l,y);q=Math.max(n.t,v);y=Math.min(n.l+n.w,y+i.w);v=Math.min(n.t+n.h,v+i.h);y-=c;v-=q;f+=i.w-y+(i.h-v);if(null==m||f<m.overflow)m={corner:d,aroundCorner:a.aroundCorner,x:c,y:q,w:y,h:v,overflow:f,spaceAvailable:h};return!f});m.overflow&&j&&j(b,m.aroundCorner,m.corner,m.spaceAvailable,e);var d=l.isBodyLtr(b.ownerDocument),i=b.style;
i.top=m.y+"px";i[d?"left":"right"]=(d?m.x:n.w-m.x-m.w)+"px";i[d?"right":"left"]="auto";return m}return b.place={at:function(a,b,c,e){c=h.map(c,function(a){var d={corner:a,pos:{x:b.x,y:b.y}};e&&(d.pos.x+="L"==a.charAt(1)?e.x:-e.x,d.pos.y+="T"==a.charAt(0)?e.y:-e.y);return d});return d(a,c)},around:function(a,b,c,k,n){function m(a,b){w.push({aroundCorner:a,corner:b,pos:{x:{L:r,R:r+y,M:r+(y>>1)}[a.charAt(1)],y:{T:p,B:p+v,M:p+(v>>1)}[a.charAt(0)]}})}var q="string"==typeof b||"offsetWidth"in b?l.position(b,
!0):b;if(b.parentNode)for(var u="absolute"==i.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){var s=l.position(b,!0),o=i.getComputedStyle(b);/relative|absolute/.test(o.position)&&(u=!1);if(!u&&/hidden|auto|scroll/.test(o.overflow)){var B=Math.min(q.y+q.h,s.y+s.h),t=Math.min(q.x+q.w,s.x+s.w);q.x=Math.max(q.x,s.x);q.y=Math.max(q.y,s.y);q.h=B-q.y;q.w=t-q.x}"absolute"==o.position&&(u=!0);b=b.parentNode}var r=q.x,p=q.y,y="w"in q?q.w:q.w=q.width,v="h"in q?q.h:(e.deprecated("place.around: dijit/place.__Rectangle: { x:"+
r+", y:"+p+", height:"+q.height+", width:"+y+" } has been deprecated.  Please use { x:"+r+", y:"+p+", h:"+q.height+", w:"+y+" }","","2.0"),q.h=q.height),w=[];h.forEach(c,function(a){var b=k;switch(a){case "above-centered":m("TM","BM");break;case "below-centered":m("BM","TM");break;case "after-centered":b=!b;case "before-centered":m(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":m(b?"TL":"TR",b?"TR":"TL");m(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":m(b?"BL":
"BR",b?"TL":"TR");m(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":m(b?"TL":"TR",b?"BL":"BR");m(b?"TR":"TL",b?"BR":"BL");break;default:m(a.aroundCorner,a.corner)}});a=d(a,w,n,{w:y,h:v});a.aroundNodePos=q;return a}}})},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe","require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),function(h,l,i,e,c,a,b,d,g){var f=new function(){var a=[];this.pop=
function(){var b;a.length?(b=a.pop(),b.style.display=""):(9>d("ie")?(b="<iframe src='"+(i.dojoBlankHtmlUrl||h.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",b=g.doc.createElement(b)):(b=e.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),c.set(b,"opacity",0.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display=
"none";a.push(b)}};l.BackgroundIframe=function(g){if(!g.id)throw Error("no id");if(d("ie")||d("mozilla")){var e=this.iframe=f.pop();g.appendChild(e);7>d("ie")||d("quirks")?(this.resize(g),this._conn=b(g,"resize",a.hitch(this,function(){this.resize(g)}))):c.set(e,{width:"100%",height:"100%"})}};a.extend(l.BackgroundIframe,{resize:function(a){this.iframe&&c.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&
(f.push(this.iframe),delete this.iframe)}});return l.BackgroundIframe})},"dijit/DropDownMenu":function(){require({cache:{"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n'}});define("dijit/DropDownMenu","dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/text!./templates/Menu.html,./_OnDijitClickMixin,./_MenuBase".split(","),
function(h,l,i,e,c,a){return h("dijit.DropDownMenu",[a,c],{templateString:e,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var a=this.isLeftToRight();this._openSubMenuKey=a?i.RIGHT_ARROW:i.LEFT_ARROW;this._closeSubMenuKey=a?i.LEFT_ARROW:i.RIGHT_ARROW;this.connectKeyNavHandlers([i.UP_ARROW],[i.DOWN_ARROW])},_onKeyPress:function(a){if(!a.ctrlKey&&!a.altKey)switch(a.charOrCode){case this._openSubMenuKey:this._moveToPopup(a);l.stop(a);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();
else this.onCancel(!1);else l.stop(a)}}})})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',"dijit/_MenuBase":function(){define("dijit/_MenuBase","dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/lang,dojo/mouse,dojo/on,dojo/window,./a11yclick,./popup,./registry,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q){return l("dijit._MenuBase",[n,q,m],{parentMenu:null,popupDelay:500,autoFocus:!1,postCreate:function(){var a=this,g=function(a){return c.contains(a,"dijitMenuItem")};this.own(d(this.containerNode,d.selector(g,b.enter),function(){a.onItemHover(k.byNode(this))}),d(this.containerNode,d.selector(g,b.leave),function(){a.onItemUnhover(k.byNode(this))}),d(this.containerNode,d.selector(g,f),function(b){a.onItemClick(k.byNode(this),b);b.stopPropagation();b.preventDefault()}));
this.inherited(arguments)},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);
this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer))this.hover_timer=this.defer("_openPopup",this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a;a._set("hovering",!0)},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=this.defer(function(){b._pendingClose_timer=
null;if(b.parentMenu)b.parentMenu.currentPopup=null;j.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();if(this._hoveredChild==a)this._hoveredChild=null;a._set("hovering",!1)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)a._pendingClose_timer=a._pendingClose_timer.remove()},_stopFocusTimer:function(){if(this._focus_timer)this._focus_timer=this._focus_timer.remove()},
_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup("keypress"==b.type):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openPopup:function(b){this._stopPopupTimer();var d=this.focusedChild;if(d){var c=d.popup;if(!c.isShowingNow){this.currentPopup&&(this._stopPendingCloseTimer(this.currentPopup),j.close(this.currentPopup));
c.parentMenu=this;c.from_item=d;var f=this;j.open({parent:this,popup:c,around:d.domNode,orient:this._orient||["after","before"],onCancel:function(){f.focusChild(d);f._cleanUp();d._setSelected(!0);f.focusedChild=d},onExecute:a.hitch(this,"_cleanUp")});this.currentPopup=c;c.connect(c.domNode,"onmouseenter",a.hitch(f,"_onPopupHover"))}if(b&&c.focus)c._focus_timer=this.defer(a.hitch(c,function(){this._focus_timer=null;this.focus()}))}},_markActive:function(){this.isActive=!0;c.replace(this.domNode,"dijitMenuActive",
"dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},_markInactive:function(){this.isActive=!1;c.replace(this.domNode,"dijitMenuPassive","dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)0<=h.indexOf(this._focusManager.activeStack,this.id)&&(e.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex),this.focusedChild.focusNode.focus()),
j.close(this.currentPopup),this.currentPopup=null;if(this.focusedChild)this.focusedChild._setSelected(!1),this.onItemUnhover(this.focusedChild),this.focusedChild=null},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild)},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();"undefined"==typeof this.isShowingNow&&this._markInactive()}})})},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",
"dojo/_base/kernel,./_Container,./_FocusMixin,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/_base/event,dojo/dom-attr,dojo/_base/lang".split(","),function(h,l,i,e,c,a,b,d,g){return a("dijit._KeyNavContainer",[i,l],{tabIndex:"0",connectKeyNavHandlers:function(a,b){var d=this._keyNavCodes={},h=g.hitch(this,"focusPrev"),m=g.hitch(this,"focusNext");e.forEach(a,function(a){d[a]=h});e.forEach(b,function(a){d[a]=m});d[c.HOME]=g.hitch(this,"focusFirstChild");d[c.END]=g.hitch(this,"focusLastChild");this.connect(this.domNode,
"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){h.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);e.forEach(this.getChildren(),g.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},
focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"),this._set("focusedChild",a))},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",this.tabIndex)});this.connect(a,
"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||(this.focusFirstChild(),d.set(this.domNode,"tabIndex","-1"))},_onBlur:function(a){this.tabIndex&&d.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild=null;this.inherited(arguments)},_onContainerKeypress:function(a){if(!a.ctrlKey&&!a.altKey){var d=this._keyNavCodes[a.charOrCode];d&&(d(),b.stop(a))}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,
1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(a,b){a&&(a=this._getSiblingOfChild(a,b));for(var d=this.getChildren(),c=0;c<d.length;c++){a||(a=d[0<b?0:d.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})})},"dijit/MenuItem":function(){require({cache:{"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n'}});
define("dijit/MenuItem","dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/kernel,dojo/sniff,./_Widget,./_TemplatedMixin,./_Contained,./_CssStateMixin,dojo/text!./templates/MenuItem.html".split(","),function(h,l,i,e,c,a,b,d,g,f,j){return h("dijit.MenuItem",[b,d,g,f],{templateString:j,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this.containerNode.innerHTML=a;this._set("label",a);"auto"===this.textDir&&this.applyTextDir(this.focusNode,this.label)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";i.set(this.containerNode,"id",a);this.accelKeyNode&&(i.set(this.accelKeyNode,"id",this.id+"_accel"),a+=" "+this.id+"_accel");this.domNode.setAttribute("aria-labelledby",a);l.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==a("ie")&&this.containerNode.focus(),
this.focusNode.focus()}catch(b){}},_onFocus:function(){this._setSelected(!0);this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(a){e.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){c.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){c.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},
_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;i.set(this.containerNode,"colSpan",a?"1":"2");this._set("accelKey",a)},_setTextDirAttr:function(a){if(!this._created||this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.label)}})})},"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n',
"dijit/Toolbar":function(){define("dijit/Toolbar","require,dojo/_base/declare,dojo/has,dojo/keys,dojo/ready,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),function(h,l,i,e,c,a,b,d){i("dijit-legacy-requires")&&c(0,function(){h(["dijit/ToolbarSeparator"])});return l("dijit.Toolbar",[a,d,b],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?
[e.LEFT_ARROW]:[e.RIGHT_ARROW],this.isLeftToRight()?[e.RIGHT_ARROW]:[e.LEFT_ARROW])}})})},"dijit/Editor":function(){define("dijit/Editor","dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/i18n,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/string,dojo/topic,dojo/_base/window,./_base/focus,./_Container,./Toolbar,./ToolbarSeparator,./layout/_LayoutWidget,./form/ToggleButton,./_editor/_Plugin,./_editor/plugins/EnterKeyHandling,./_editor/html,./_editor/range,./_editor/RichText,./main,dojo/i18n!./_editor/nls/commands".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q,u,s,o,B,t,r,p,y,v,w,x,D){function z(a){return new p({command:a.name})}function E(a){return new p({buttonClass:r,command:a.name})}l=l("dijit.Editor",x,{plugins:null,extraPlugins:null,constructor:function(){if(!j.isArray(this.plugins))this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",
y];this._plugins=[];this._editInterval=1E3*this.editActionInterval;k("ie")&&(this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate"))},postMixInProperties:function(){this.setValueDeferred=new i;this.inherited(arguments)},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(j.isArray(this.extraPlugins))this.plugins=this.plugins.concat(this.extraPlugins);this.inherited(arguments);this.commands=e.getLocalization("dijit._editor","commands",
this.lang);if(!this.toolbar)this.toolbar=new o({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang}),this.header.appendChild(this.toolbar.domNode);h.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);a.add(this.iframe.parentNode,"dijitEditorIFrameContainer");a.add(this.iframe,"dijitEditorIFrame");c.set(this.iframe,"allowTransparency",!0);k("webkit")&&d.set(this.domNode,"KhtmlUserSelect","none");this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){h.forEach(this._plugins,
function(a){a&&a.destroy&&a.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(a,b){var d=j.isString(a)?{name:a}:j.isFunction(a)?{ctor:a}:a;if(!d.setEditor){var c={args:d,plugin:null,editor:this};if(d.name)p.registry[d.name]?c.plugin=p.registry[d.name](d):m.publish(D._scopeName+".Editor.getPlugin",c);if(!c.plugin)try{var f=d.ctor||j.getObject(d.name)||require(d.name);if(f)c.plugin=new f(d)}catch(g){throw Error(this.id+": cannot find plugin ["+
d.name+"]");}if(!c.plugin)throw Error(this.id+": cannot find plugin ["+d.name+"]");a=c.plugin}1<arguments.length?this._plugins[b]=a:this._plugins.push(a);a.setEditor(this);j.isFunction(a.setToolbar)&&a.setToolbar(this.toolbar)},resize:function(a){a&&t.prototype.resize.apply(this,arguments)},layout:function(){this.editingArea.style.height=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+b.getPadBorderExtents(this.iframe.parentNode).h+b.getMarginExtents(this.iframe.parentNode).h)+"px";
if(this.iframe)this.iframe.style.height="100%";this._layoutMode=!0},_onIEMouseDown:function(a){var b,d=this.document.body,c=d.clientWidth,f=d.clientHeight,g=d.clientLeft,e=d.offsetWidth,j=d.offsetHeight,h=d.offsetLeft;/^rtl$/i.test(d.dir||"")?c<e&&a.x>c&&a.x<e&&(b=!0):a.x<g&&a.x>h&&(b=!0);b||f<j&&a.y>f&&a.y<j&&(b=!0);b||(delete this._cursorToStart,delete this._savedSelection,"BODY"==a.target.tagName&&this.defer("placeCursorAtEnd"),this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},
onBeforeDeactivate:function(a){this.customUndo&&this.endEditing(!0);"BODY"!=a.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(a){if(!this._inEditing)this._inEditing=!0,this._beginEditing(a);if(0<this.editActionInterval)this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval)},_steps:[],_undoedSteps:[],execCommand:function(a){if(this.customUndo&&("undo"==a||"redo"==a))return this[a]();this.customUndo&&(this.endEditing(),
this._beginEditing());var b=this.inherited(arguments);this.customUndo&&this._endEditing();return b},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(a){var b;try{if(b=this.document.execCommand(a,!1,null),k("webkit")&&!b)throw{code:1011};}catch(d){if(1011==d.code||9==d.code&&k("opera"))b=n.substitute,alert(b(this.commands.systemShortcut,[this.commands[a],
b(this.commands[k("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[a]])]));b=!1}return b},queryCommandEnabled:function(a){return this.customUndo&&("undo"==a||"redo"==a)?"undo"==a?1<this._steps.length:0<this._undoedSteps.length:this.inherited(arguments)},_moveToBookmark:function(a){var b=a.mark,d=a.mark,a=a.isCollapsed,c,f,g;if(d)if(9>k("ie"))if(j.isArray(d))b=[],h.forEach(d,function(a){b.push(w.getNode(a,this.editNode))},this),q.withGlobal(this.window,"moveToBookmark",u,[{mark:b,isCollapsed:a}]);
else{if(d.startContainer&&d.endContainer&&(g=w.getSelection(this.window))&&g.removeAllRanges)g.removeAllRanges(),a=w.create(this.window),c=w.getNode(d.startContainer,this.editNode),f=w.getNode(d.endContainer,this.editNode),c&&f&&(a.setStart(c,d.startOffset),a.setEnd(f,d.endOffset),g.addRange(a))}else if((g=w.getSelection(this.window))&&g.removeAllRanges)g.removeAllRanges(),a=w.create(this.window),c=w.getNode(d.startContainer,this.editNode),f=w.getNode(d.endContainer,this.editNode),c&&f&&(a.setStart(c,
d.startOffset),a.setEnd(f,d.endOffset),g.addRange(a))},_changeToStep:function(a,b){this.setValue(b.text);var d=b.bookmark;d&&this._moveToBookmark(d)},undo:function(){var a=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._steps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(b,this._steps[this._steps.length-1]),this._undoedSteps.push(b),this.onDisplayChanged(),delete this._undoRedoActive,a=!0);delete this._undoRedoActive}return a},redo:function(){var a=
!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._undoedSteps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],b),this._steps.push(b),this.onDisplayChanged(),a=!0);delete this._undoRedoActive}return a},endEditing:function(a){if(this._editTimer)this._editTimer=this._editTimer.remove();if(this._inEditing)this._endEditing(a),this._inEditing=!1},_getBookmark:function(){var a=q.withGlobal(this.window,u.getBookmark),b=[];
if(a&&a.mark){var d=a.mark;if(9>k("ie")){var c=w.getSelection(this.window);if(j.isArray(d))h.forEach(a.mark,function(a){b.push(w.getIndex(a,this.editNode).o)},this),a.mark=b;else if(c){var f;c.rangeCount&&(f=c.getRangeAt(0));a.mark=f?f.cloneRange():q.withGlobal(this.window,u.getBookmark)}}try{if(a.mark&&a.mark.startContainer)b=w.getIndex(a.mark.startContainer,this.editNode).o,a.mark={startContainer:b,startOffset:a.mark.startOffset,endContainer:a.mark.endContainer===a.mark.startContainer?b:w.getIndex(a.mark.endContainer,
this.editNode).o,endOffset:a.mark.endOffset}}catch(g){a.mark=null}}return a},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:v.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var a=v.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(a){!k("ie")&&!this.iframe&&a.keyCode==f.TAB&&!this.tabIndent&&this._saveSelection();if(this.customUndo){var b=a.keyCode;if(a.ctrlKey&&
!a.altKey){if(90==b||122==b){g.stop(a);this.undo();return}if(89==b||121==b){g.stop(a);this.redo();return}}this.inherited(arguments);switch(b){case f.ENTER:case f.BACKSPACE:case f.DELETE:this.beginEditing();break;case 88:case 86:if(a.ctrlKey&&!a.altKey&&!a.metaKey){this.endEditing();88==a.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!a.ctrlKey&&!a.altKey&&!a.metaKey&&(a.keyCode<f.F1||a.keyCode>f.F15)){this.beginEditing();break}case f.ALT:this.endEditing();
break;case f.UP_ARROW:case f.DOWN_ARROW:case f.LEFT_ARROW:case f.RIGHT_ARROW:case f.HOME:case f.END:case f.PAGE_UP:case f.PAGE_DOWN:this.endEditing(!0);case f.CTRL:case f.SHIFT:case f.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(a){}},_restoreSelection:function(){this._savedSelection&&(delete this._cursorToStart,q.withGlobal(this.window,"isCollapsed",u)&&this._moveToBookmark(this._savedSelection),
delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(a){this.customUndo?this.isClosed?this.setValue(a):(this.beginEditing(),a||(a="&#160;"),this.setValue(a),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(a){this.setValueDeferred.then(j.hitch(this,function(){!this.disabled&&a||!this._buttonEnabledPlugins&&a?h.forEach(this._plugins,function(a){a.set("disabled",!0)}):this.disabled&&!a&&h.forEach(this._plugins,function(a){a.set("disabled",
!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&d.set(this.document.body,"color",d.get(this.iframe,"color"))}catch(a){}}});j.mixin(p.registry,{undo:z,redo:z,cut:z,copy:z,paste:z,insertOrderedList:z,insertUnorderedList:z,indent:z,outdent:z,justifyCenter:z,justifyFull:z,justifyLeft:z,justifyRight:z,"delete":z,selectAll:z,removeFormat:z,unlink:z,insertHorizontalRule:z,bold:E,italic:E,underline:E,strikethrough:E,subscript:E,
superscript:E,"|":function(){return new p({setEditor:function(a){this.editor=a;this.button=new B({ownerDocument:a.ownerDocument})}})}});return l})},"dijit/_base/focus":function(){define("dijit/_base/focus","dojo/_base/array,dojo/dom,dojo/_base/lang,dojo/topic,dojo/_base/window,../focus,../main".split(","),function(h,l,i,e,c,a,b){a.focus=function(d){if(d){var g="node"in d?d.node:d,f=d.bookmark,d=d.openedForWindow,e=f?f.isCollapsed:!1;if(g){var h="iframe"==g.tagName.toLowerCase()?g.contentWindow:g;
if(h&&h.focus)try{h.focus()}catch(n){}a._onFocusNode(g)}if(f&&c.withGlobal(d||c.global,b.isCollapsed)&&!e){d&&d.focus();try{c.withGlobal(d||c.global,b.moveToBookmark,null,[f])}catch(m){}}}};a.watch("curNode",function(a,c,f){b._curFocus=f;b._prevFocus=c;f&&e.publish("focusNode",f)});a.watch("activeStack",function(a,c,f){b._activeStack=f});a.on("widget-blur",function(a,b){e.publish("widgetBlur",a,b)});a.on("widget-focus",function(a,b){e.publish("widgetFocus",a,b)});i.mixin(b,{_curFocus:null,_prevFocus:null,
isCollapsed:function(){return b.getBookmark().isCollapsed},getBookmark:function(){var b,g,f=c.doc.selection,e=a.curNode;if(c.global.getSelection){if(f=c.global.getSelection())if(f.isCollapsed){if(b=e?e.tagName:"")if(b=b.toLowerCase(),"textarea"==b||"input"==b&&(!e.type||"text"==e.type.toLowerCase()))return f={start:e.selectionStart,end:e.selectionEnd,node:e,pRange:!0},{isCollapsed:f.end<=f.start,mark:f};b={isCollapsed:!0};if(f.rangeCount)b.mark=f.getRangeAt(0).cloneRange()}else g=f.getRangeAt(0),
b={isCollapsed:!1,mark:g.cloneRange()}}else if(f){b=e?e.tagName:"";b=b.toLowerCase();if(e&&b&&("button"==b||"textarea"==b||"input"==b)){if(f.type&&"none"==f.type.toLowerCase())return{isCollapsed:!0,mark:null};g=f.createRange();return{isCollapsed:g.text&&g.text.length?!1:!0,mark:{range:g,pRange:!0}}}b={};try{g=f.createRange(),b.isCollapsed=!("Text"==f.type?g.htmlText.length:g.length)}catch(h){return b.isCollapsed=!0,b}if("CONTROL"==f.type.toUpperCase())if(g.length){b.mark=[];f=0;for(e=g.length;f<e;)b.mark.push(g.item(f++))}else b.isCollapsed=
!0,b.mark=null;else b.mark=g.getBookmark()}return b},moveToBookmark:function(a){var b=c.doc;if(a=a.mark)if(c.global.getSelection){if((b=c.global.getSelection())&&b.removeAllRanges)a.pRange?(b=a.node,b.selectionStart=a.start,b.selectionEnd=a.end):(b.removeAllRanges(),b.addRange(a))}else if(b.selection&&a){var f;a.pRange?f=a.range:i.isArray(a)?(f=b.body.createControlRange(),h.forEach(a,function(a){f.addElement(a)})):(f=b.body.createTextRange(),f.moveToBookmark(a));f.select()}},getFocus:function(d,g){var f=
!a.curNode||d&&l.isDescendant(a.curNode,d.domNode)?b._prevFocus:a.curNode;return{node:f,bookmark:f&&f==a.curNode&&c.withGlobal(g||c.global,b.getBookmark),openedForWindow:g}},_activeStack:[],registerIframe:function(b){return a.registerIframe(b)},unregisterIframe:function(a){a&&a.remove()},registerWin:function(b,c){return a.registerWin(b,c)},unregisterWin:function(a){a&&a.remove()}});return b})},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget",
"./_TemplatedMixin"],function(h,l,i,e){return h("dijit.ToolbarSeparator",[i,e],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);l.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget","dojo/_base/lang,../_Widget,../_Container,../_Contained,../Viewport,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style".split(","),
function(h,l,i,e,c,a,b,d,g){return a("dijit.layout._LayoutWidget",[l,i,e],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(c.on("resize",h.hitch(this,"resize")))}},resize:function(a,b){var c=this.domNode;a&&d.setMarginBox(c,a);var e=b||{};h.mixin(e,a||
{});if(!("h"in e)||!("w"in e))e=h.mixin(d.getMarginBox(c),e);var m=g.getComputedStyle(c),i=d.getMarginExtents(c,m),l=d.getBorderExtents(c,m),e=this._borderBox={w:e.w-(i.w+l.w),h:e.h-(i.h+l.h)},i=d.getPadExtents(c,m);this._contentBox={l:g.toPixelValue(c,m.paddingLeft),t:g.toPixelValue(c,m.paddingTop),w:e.w-i.w,h:e.h-i.h};this.layout()},layout:function(){},_setupChild:function(a){b.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);
this._started&&this._setupChild(a)},removeChild:function(a){b.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/Viewport":function(){define("dijit/Viewport","dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),function(h,l,i,e,c,a){var b=new h;i(200,function(){var d=a.getBox();b._rlh=l(c.global,"resize",function(){var c=a.getBox();d.h==c.h&&d.w==c.w||(d=c,b.emit("resize"))});if(8==e("ie")){var g=
screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=g)g=screen.deviceXDPI,b.emit("resize")},500)}});return b})},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(h,l,i,e){return h("dijit.form.ToggleButton",[i,e],{baseClass:"dijitToggleButton",setChecked:function(c){l.deprecated("setChecked("+c+") is deprecated. Use set('checked',"+c+") instead.","","2.0");this.set("checked",c)}})})},
"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n'}});
define("dijit/form/Button","require,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/ready,./_FormWidget,./_ButtonMixin,dojo/text!./templates/Button.html".split(","),function(h,l,i,e,c,a,b,d,g,f){e("dijit-legacy-requires")&&b(0,function(){h(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return l("dijit.form.Button",[d,g],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",
templateString:f,_setValueAttr:"valueNode",_onClick:function(a){var b=this.inherited(arguments);b&&this.valueNode&&(this.valueNode.click(),a.preventDefault(),a.stopPropagation());return b},_fillContent:function(b){if(b&&(!this.params||!("label"in this.params)))if(b=a.trim(b.innerHTML))this.label=b},_setShowLabelAttr:function(a){this.containerNode&&i.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){c.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},_setLabelAttr:function(b){this.inherited(arguments);if(!this.showLabel&&!("title"in this.params))this.titleNode.title=a.trim(this.containerNode.innerText||this.containerNode.textContent||"")}})})},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget","dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/ready,../_Widget,../_CssStateMixin,../_TemplatedMixin,./_FormWidgetMixin".split(","),function(h,l,i,e,c,a,b,d){l("dijit-legacy-requires")&&e(0,function(){require(["dijit/form/_FormValueWidget"])});
return h("dijit.form._FormWidget",[c,b,a,d],{setDisabled:function(a){i.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){i.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){i.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=
this.name?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin","dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),function(h,l,i,e,c,a,b,d,g){return l("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,
scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);i.set(this.focusNode,"disabled",a);this.valueNode&&i.set(this.valueNode,"disabled",a);this.focusNode.setAttribute("aria-disabled",a?"true":"false");a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",h.forEach(c.isArray(a)?a:[a],function(a){a=this[a];b("webkit")||g.hasDefaultTabStop(a)?a.setAttribute("tabIndex",
"-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.connect(this.focusNode,"onfocus",function(){this.disconnect(c);this.disconnect(b)}),c=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(c);this.disconnect(b);this.focused&&this.focus()});this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&
this.focusNode&&"none"!=e.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||
0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));
this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(h,l,i,e){return h("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(c){if(this.disabled)return i.stop(c),!1;var a=!1===this.onClick(c);if(!a&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var b=this.domNode;b.parentNode;b=b.parentNode){var d=e.byNode(b);if(d&&"function"==typeof d._onSubmit){d._onSubmit(c);
a=!0;break}}a&&c.preventDefault();return!a},postCreate:function(){this.inherited(arguments);l.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(c){this._set("label",c);(this.containerNode||this.focusNode).innerHTML=c}})})},"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(h,l){return h("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(h){var e=this.checked;this._set("checked",!e);var c=this.inherited(arguments);this.set("checked",c?this.checked:e);return c},_setCheckedAttr:function(h,e){this._set("checked",h);l.set(this.focusNode||this.domNode,"checked",h);(this.focusNode||this.domNode).setAttribute(this._aria_attr,
h?"true":"false");this._handleOnChange(h,e)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(h,l,i,e){l=l("dijit._editor._Plugin",null,{constructor:function(c){this.params=c||{};i.mixin(this,this.params);this._connects=[];this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,
command:"",useDefaultCommand:!0,buttonClass:e,disabled:!1,getLabel:function(c){return this.editor.commands[c]},_initButton:function(){if(this.command.length){var c=this.getLabel(this.command),a=this.editor,b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button)this.button=new this.buttonClass(i.mixin({label:c,ownerDocument:a.ownerDocument,dir:a.dir,lang:a.lang,showLabel:!1,iconClass:b,dropDown:this.dropDown,tabIndex:"-1"},this.params||
{}))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){for(var c;c=this._connects.pop();)c.remove();this.dropDown&&this.dropDown.destroyRecursive()},connect:function(c,a,b){this._connects.push(h.connect(c,a,this,b))},updateState:function(){var c=this.editor,a=this.command,b,d;if(c&&c.isLoaded&&a.length){var g=this.get("disabled");if(this.button)try{d=!g&&c.queryCommandEnabled(a);if(this.enabled!==d)this.enabled=d,this.button.set("disabled",!d);
if(d&&"boolean"==typeof this.button.checked&&(b=c.queryCommandState(a),this.checked!==b))this.checked=b,this.button.set("checked",c.queryCommandState(a))}catch(f){}}},setEditor:function(c){this.editor=c;this._initButton();if(this.button&&this.useDefaultCommand)this.editor.queryCommandAvailable(this.command)?this.connect(this.button,"onClick",i.hitch(this.editor,"execCommand",this.command,this.commandArg)):this.button.domNode.style.display="none";this.connect(this.editor,"onNormalizedDisplayChanged",
"updateState")},setToolbar:function(c){this.button&&c.addChild(this.button)},set:function(c,a){if("object"===typeof c){for(var b in c)this.set(b,c[b]);return this}b=this._getAttrNames(c);if(this[b.s])var d=this[b.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(c,a);return d||this},get:function(c){var a=this._getAttrNames(c);return this[a.g]?this[a.g]():this[c]},_setDisabledAttr:function(c){this.disabled=c;this.updateState()},_getAttrNames:function(c){var a=this._attrPairNames;
if(a[c])return a[c];var b=c.charAt(0).toUpperCase()+c.substr(1);return a[c]={s:"_set"+b+"Attr",g:"_get"+b+"Attr"}},_set:function(c,a){this[c]=a}});l.registry={};return l})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling","dojo/_base/declare,dojo/dom-construct,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/_base/window,dojo/window,../_Plugin,../RichText,../range,../../_base/focus".split(","),function(h,l,i,e,c,a,b,d,g,f,j,k){return h("dijit._editor.plugins.EnterKeyHandling",
g,{blockNodeForEnter:"BR",constructor:function(a){if(a){if("blockNodeForEnter"in a)a.blockNodeForEnter=a.blockNodeForEnter.toUpperCase();c.mixin(this,a)}},setEditor:function(b){if(this.editor!==b)if(this.editor=b,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,b.onLoadDeferred.then(c.hitch(this,function(d){this.connect(b.document,"onkeypress",function(a){if(a.charOrCode==e.ENTER){var b=c.mixin({},a);b.shiftKey=!0;this.handleEnterKey(b)||i.stop(a)}});9==a("ie")&&this.connect(b.document,"onpaste",
function(){setTimeout(dojo.hitch(this,function(){var a=this.editor.document.selection.createRange();a.move("character",-1);a.select();a.move("character",1);a.select()}),0)});return d}));else if(this.blockNodeForEnter){var d=c.hitch(this,this.handleEnterKey);b.addKeyHandler(13,0,0,d);b.addKeyHandler(13,0,1,d);this.connect(this.editor,"onKeyPressed","onKeyPressed")}},onKeyPressed:function(){if(this._checkListLater){if(b.withGlobal(this.editor.window,"isCollapsed",k)){var d=this.editor._sCall("getAncestorElement",
["LI"]);if(d){if(a("mozilla")&&"LI"==d.parentNode.parentNode.nodeName)d=d.parentNode.parentNode;var c=d.firstChild;if(c&&1==c.nodeType&&("UL"==c.nodeName||"OL"==c.nodeName))d.insertBefore(c.ownerDocument.createTextNode("\u00a0"),c),c=j.create(this.editor.window),c.setStart(d.firstChild,0),d=j.getSelection(this.editor.window,!0),d.removeAllRanges(),d.addRange(c)}else if(f.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter),d=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]))d.innerHTML=
this.bogusHtmlContent,a("ie")&&(d=this.editor.document.selection.createRange(),d.move("character",-1),d.select())}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(b){var m;var c,g,e,h,i=this.editor.document,k,t;if(b.shiftKey){var b=this.editor._sCall("getParentElement",
[]),r=j.getAncestor(b,this.blockNodes);if(r){if("LI"==r.tagName)return!0;b=j.getSelection(this.editor.window);c=b.getRangeAt(0);c.collapsed||(c.deleteContents(),b=j.getSelection(this.editor.window),c=b.getRangeAt(0));if(j.atBeginningOfContainer(r,c.startContainer,c.startOffset))k=i.createElement("br"),c=j.create(this.editor.window),r.insertBefore(k,r.firstChild),c.setStartAfter(k),b.removeAllRanges(),b.addRange(c);else if(j.atEndOfContainer(r,c.startContainer,c.startOffset))c=j.create(this.editor.window),
k=i.createElement("br"),r.appendChild(k),r.appendChild(i.createTextNode("\u00a0")),c.setStart(r.lastChild,0),b.removeAllRanges(),b.addRange(c);else return(t=c.startContainer)&&3==t.nodeType?(e=t.nodeValue,g=i.createTextNode(e.substring(0,c.startOffset)),e=i.createTextNode(e.substring(c.startOffset)),h=i.createElement("br"),""==e.nodeValue&&a("webkit")&&(e=i.createTextNode("\u00a0")),l.place(g,t,"after"),l.place(h,g,"after"),l.place(e,h,"after"),l.destroy(t),c=j.create(this.editor.window),c.setStart(e,
0),b.removeAllRanges(),b.addRange(c),!1):!0}else if(b=j.getSelection(this.editor.window),b.rangeCount){if((c=b.getRangeAt(0))&&c.startContainer)if(c.collapsed||(c.deleteContents(),b=j.getSelection(this.editor.window),c=b.getRangeAt(0)),(t=c.startContainer)&&3==t.nodeType){r=!1;k=c.startOffset;if(t.length<k)e=this._adjustNodeAndOffset(t,k),t=e.node,k=e.offset;e=t.nodeValue;g=i.createTextNode(e.substring(0,k));e=i.createTextNode(e.substring(k));h=i.createElement("br");e.length||(e=i.createTextNode("\u00a0"),
r=!0);g.length?l.place(g,t,"after"):g=t;l.place(h,g,"after");l.place(e,h,"after");l.destroy(t);c=j.create(this.editor.window);c.setStart(e,0);c.setEnd(e,e.length);b.removeAllRanges();b.addRange(c);r&&!a("webkit")?this.editor._sCall("remove",[]):this.editor._sCall("collapse",[!0])}else 0<=c.startOffset&&(k=t.childNodes[c.startOffset]),h=i.createElement("br"),e=i.createTextNode("\u00a0"),k?(l.place(h,k,"before"),l.place(e,h,"after")):(t.appendChild(h),t.appendChild(e)),c=j.create(this.editor.window),
c.setStart(e,0),c.setEnd(e,e.length),b.removeAllRanges(),b.addRange(c),this.editor._sCall("collapse",[!0])}else f.prototype.execCommand.call(this.editor,"inserthtml","<br>");return!1}var p=!0,b=j.getSelection(this.editor.window);c=b.getRangeAt(0);c.collapsed||(c.deleteContents(),b=j.getSelection(this.editor.window),c=b.getRangeAt(0));k=j.getBlockAncestor(c.endContainer,null,this.editor.editNode);if(this._checkListLater=(h=k.blockNode)&&("LI"==h.nodeName||"LI"==h.parentNode.nodeName)){if(a("mozilla"))this._pressedEnterInBlock=
h;if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(h.innerHTML))h.innerHTML="",a("webkit")&&(c=j.create(this.editor.window),c.setStart(h,0),b.removeAllRanges(),b.addRange(c)),this._checkListLater=!1;return!0}if(!k.blockNode||k.blockNode===this.editor.editNode){try{f.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(y){}k={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),
blockContainer:this.editor.editNode};if(k.blockNode){if(k.blockNode!=this.editor.editNode&&!(k.blockNode.textContent||k.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(k.blockNode),!1}else k.blockNode=this.editor.editNode;b=j.getSelection(this.editor.window);c=b.getRangeAt(0)}h=i.createElement(this.blockNodeForEnter);h.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(k.blockNode);var v=c.endOffset,p=c.endContainer;if(p.length<v)e=this._adjustNodeAndOffset(p,
v),p=e.node,v=e.offset;if(j.atEndOfContainer(k.blockNode,p,v))k.blockNode===k.blockContainer?k.blockNode.appendChild(h):l.place(h,k.blockNode,"after"),p=!1,c=j.create(this.editor.window),c.setStart(h,0),b.removeAllRanges(),b.addRange(c),this.editor.height&&d.scrollIntoView(h);else if(j.atBeginningOfContainer(k.blockNode,c.startContainer,c.startOffset))l.place(h,k.blockNode,k.blockNode===k.blockContainer?"first":"before"),h.nextSibling&&this.editor.height&&(c=j.create(this.editor.window),c.setStart(h.nextSibling,
0),b.removeAllRanges(),b.addRange(c),d.scrollIntoView(h.nextSibling)),p=!1;else{k.blockNode===k.blockContainer?k.blockNode.appendChild(h):l.place(h,k.blockNode,"after");p=!1;if(k.blockNode.style&&h.style&&k.blockNode.style.cssText)h.style.cssText=k.blockNode.style.cssText;if((t=c.startContainer)&&3==t.nodeType){v=c.endOffset;if(t.length<v)e=this._adjustNodeAndOffset(t,v),t=e.node,v=e.offset;e=t.nodeValue;g=i.createTextNode(e.substring(0,v));e=i.createTextNode(e.substring(v,e.length));l.place(g,t,
"before");l.place(e,t,"after");l.destroy(t);for(g=g.parentNode;g!==k.blockNode;){v=i.createElement(g.tagName);if(g.style&&v.style&&g.style.cssText)v.style.cssText=g.style.cssText;if("FONT"===g.tagName){if(g.color)v.color=g.color;if(g.face)v.face=g.face;if(g.size)v.size=g.size}for(c=e;c;)t=c.nextSibling,v.appendChild(c),c=t;l.place(v,g,"after");e=v;g=g.parentNode}c=e;if(1==c.nodeType||3==c.nodeType&&c.nodeValue)h.innerHTML="";for(g=c;c;)t=c.nextSibling,h.appendChild(c),c=t}c=j.create(this.editor.window);
i=g;if("BR"!==this.blockNodeForEnter){for(;i;)r=i,m=t=i.firstChild,i=m;if(r&&r.parentNode){if(h=r.parentNode,c.setStart(h,0),b.removeAllRanges(),b.addRange(c),this.editor.height&&d.scrollIntoView(h),a("mozilla"))this._pressedEnterInBlock=k.blockNode}else p=!0}else if(c.setStart(h,0),b.removeAllRanges(),b.addRange(c),this.editor.height&&d.scrollIntoView(h),a("mozilla"))this._pressedEnterInBlock=k.blockNode}return p},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3==a.nextSibling.nodeType;)b-=
a.length,a=a.nextSibling;return{node:a,offset:b}},removeTrailingBr:function(a){if(a=/P|DIV|LI/i.test(a.tagName)?a:this.editor._sCall("getParentOfType",[a,["P","DIV","LI"]]))if(a.lastChild&&(1<a.childNodes.length&&3==a.lastChild.nodeType&&/^[\s\xAD]*$/.test(a.lastChild.nodeValue)||"BR"==a.lastChild.tagName)&&l.destroy(a.lastChild),!a.childNodes.length)a.innerHTML=this.bogusHtmlContent}})})},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText","dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/on,dojo/query,dojo/ready,dojo/sniff,dojo/topic,dojo/_base/unload,dojo/_base/url,dojo/_base/window,../_Widget,../_CssStateMixin,./selection,./range,./html,../focus,../main".split(","),
function(h,l,i,e,c,a,b,d,g,f,j,k,n,m,q,u,s,o,B,t,r,p,y,v,w,x,D,z,E){var C=i("dijit._editor.RichText",[y,v],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(a&&m.isString(a.value))this.value=a.value;this.onLoadDeferred=new e},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){this.domNode.tagName.toLowerCase();this.contentPreFilters=[m.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(o("mozilla"))this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);if(o("webkit"))this.contentPreFilters=
[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);if(o("ie"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[m.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);this.inherited(arguments);B.publish(E._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=m.hitch(this,
function(a,b){return function(){return!this.execCommand(a,b)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock","h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};if(!o("ie"))b.Z=a("redo");for(var d in b)this.addKeyHandler(d,!0,!1,b[d])},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(C._editorCommandsLocalized)this._local2NativeFormatNames=
C._local2NativeFormatNames,this._native2LocalFormatNames=C._native2LocalFormatNames;else{C._editorCommandsLocalized=!0;C._local2NativeFormatNames={};C._native2LocalFormatNames={};this._local2NativeFormatNames=C._local2NativeFormatNames;this._native2LocalFormatNames=C._native2LocalFormatNames;for(var a="div,p,pre,h1,h2,h3,h4,h5,h6,ol,ul,address".split(","),b="",c,f=0;c=a[f++];)b="l"!==c.charAt(1)?b+("<"+c+"><span>content</span></"+c+"><br/>"):b+("<"+c+"><li>content</li></"+c+"><br/>");var g=d.create("div",
{style:{position:"absolute",top:"0px",zIndex:10,opacity:0.01},innerHTML:b});this.ownerDocumentBody.appendChild(g);this.defer(m.hitch(this,function(){for(var a=g.firstChild;a;)try{this._sCall("selectElement",[a.firstChild]);var b=a.tagName.toLowerCase();this._local2NativeFormatNames[b]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[b]]=b;a=a.nextSibling.nextSibling}catch(c){}d.destroy(g)}))}},open:function(g){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=
new e;this.isClosed||this.close();B.publish(E._scopeName+"._editor.RichText::open",this);if(1===arguments.length&&g.nodeName)this.domNode=g;var h=this.domNode,j;if(m.isString(this.value))j=this.value,delete this.value,h.innerHTML="";else if(h.nodeName&&"textarea"==h.nodeName.toLowerCase()){var i=this.textarea=h;this.name=i.name;j=i.value;h=this.domNode=this.ownerDocument.createElement("div");h.setAttribute("widgetId",this.id);i.removeAttribute("widgetId");h.cssText=i.cssText;h.className+=" "+i.className;
d.place(h,i,"before");var k=m.hitch(this,function(){f.set(i,{display:"block",position:"absolute",top:"-1000px"});if(o("ie")){var a=i.style;this.__overflow=a.overflow;a.overflow="hidden"}});o("ie")?this.defer(k,10):k();if(i.form){var n=i.value;this.reset=function(){this.getValue()!==n&&this.replaceValue(n)};q(i.form,"submit",m.hitch(this,function(){a.set(i,"disabled",this.disabled);i.value=this.getValue()}))}}else j=D.getChildrenHtml(h),h.innerHTML="";this.value=j;if(h.nodeName&&"LI"===h.nodeName)h.innerHTML=
" <br>";this.header=h.ownerDocument.createElement("div");h.appendChild(this.header);this.editingArea=h.ownerDocument.createElement("div");h.appendChild(this.editingArea);this.footer=h.ownerDocument.createElement("div");h.appendChild(this.footer);if(!this.name)this.name=this.id+"_AUTOGEN";if(""!==this.name&&(!l.useXDomain||l.allowXdRichTextSave)){if((k=c.byId(E._scopeName+"._editor.RichText.value"))&&""!==k.value)for(var p=k.value.split(this._SEPARATOR),u=0,r;r=p[u++];)if(r=r.split(this._NAME_CONTENT_SEP),
r[0]===this.name){j=r[1];p=p.splice(u,1);k.value=p.join(this._SEPARATOR);break}if(!C._globalSaveHandler)C._globalSaveHandler={},t.addOnUnload(function(){for(var a in C._globalSaveHandler){var b=C._globalSaveHandler[a];m.isFunction(b)&&b()}});C._globalSaveHandler[this.id]=m.hitch(this,"_saveContent")}this.isClosed=!1;var s=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");s.id=this.id+"_iframe";s.style.border="none";s.style.width="100%";if(this._layoutMode)s.style.height="100%";
else if(7<=o("ie")){if(this.height)s.style.height=this.height;if(this.minHeight)s.style.minHeight=this.minHeight}else s.style.height=this.height?this.height:this.minHeight;s.frameBorder=0;s._loadFunc=m.hitch(this,function(a){this.window=a;this.document=this.window.document;o("ie")&&this._localizeEditorCommands();this.onLoad(j)});var k=this._getIframeDocTxt(),v="javascript: '"+k.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";s.setAttribute("src",v);this.editingArea.appendChild(s);4>=o("safari")&&(k=
s.getAttribute("src"),(!k||-1===k.indexOf("javascript"))&&this.defer(function(){s.setAttribute("src",v)}));if("LI"===h.nodeName)h.lastChild.style.marginTop="-1.2em";b.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var a=f.getComputedStyle(this.domNode),b="",d=!0;if(o("ie")||o("webkit")||!this.height&&!o("mozilla"))b="<div id='dijitEditorBody'></div>",d=!1;else if(o("mozilla"))this._cursorToStart=!0,b="&#160;";var c=[a.fontWeight,
a.fontSize,a.fontFamily].join(" "),g=a.lineHeight,g=0<=g.indexOf("px")?parseFloat(g)/parseFloat(a.fontSize):0<=g.indexOf("em")?parseFloat(g):"normal",e="",h=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(a){var a=a.replace(/^;/ig,"")+";",b=a.split(":")[0];if(b){var b=m.trim(b),b=b.toLowerCase(),d,c="";for(d=0;d<b.length;d++){var g=b.charAt(d);switch(g){case "-":d++,g=b.charAt(d).toUpperCase();default:c+=g}}f.set(h.domNode,c,"")}e+=a+";"});a=u('label[for="'+this.id+'"]');return[this.isLeftToRight()?
"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",o("mozilla")&&a.length?"<title>"+a[0].innerHTML+"</title>\n":"","<meta http-equiv='Content-Type' content='text/html'>\n<style>\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n",o("webkit")?"\t\twidth: 100%;\n":"",o("webkit")?"\t\theight: 100%;\n":"","\t}\n\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",c,";\n",this.height||o("opera")?"":"\t\tposition: fixed;\n","\t\tmin-height:",this.minHeight,
";\n\t\tline-height:",g,";\n\t}\n\tp{ margin: 1em 0; }\n",!d&&!this.height?"\tbody,html {overflow-y: hidden;}\n":"","\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",!o("ie")?"\tli{ min-height:1.2em; }\n":"","</style>\n",this._applyEditingAreaStyleSheets(),"\n</head>\n<body ",d?"id='dijitEditorBody' ":"","onload='frameElement && frameElement._loadFunc(window,document)' ",
"style='"+e+"'>",b,"</body>\n</html>"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];if(this.styleSheets)a=this.styleSheets.split(";"),this.styleSheets="";a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var b="",d=0,c;c=a[d++];)c=(new r(p.global.location,c)).toString(),this.editingAreaStyleSheets.push(c),b+='<link rel="stylesheet" type="text/css" href="'+c+'"/>';return b},addStyleSheet:function(a){var b=a.toString();if("."===b.charAt(0)||"/"!==b.charAt(0)&&
!a.host)b=(new r(p.global.location,b)).toString();-1<h.indexOf(this.editingAreaStyleSheets,b)||(this.editingAreaStyleSheets.push(b),this.onLoadDeferred.then(m.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(b);else{var a=this.document.getElementsByTagName("head")[0],d=this.document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=b;a.appendChild(d)}})))},removeStyleSheet:function(a){var b=a.toString();if("."===b.charAt(0)||"/"!==b.charAt(0)&&
!a.host)b=(new r(p.global.location,b)).toString();a=h.indexOf(this.editingAreaStyleSheets,b);-1!==a&&(delete this.editingAreaStyleSheets[a],u('link:[href="'+b+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(a){a=!!a;this._set("disabled",a);if(this.isLoaded){if(o("ie")||o("webkit")||o("opera")){var b=o("ie")&&(this.isLoaded||!this.focusOnLoad);if(b)this.editNode.unselectable="on";this.editNode.contentEditable=!a;b&&this.defer(function(){if(this.editNode)this.editNode.unselectable=
"off"})}else{try{this.document.designMode=a?"off":"on"}catch(d){return}if(!a&&this._mozSettingProps)for(b in a=this._mozSettingProps,a)if(a.hasOwnProperty(b))try{this.document.execCommand(b,!1,a[b])}catch(c){}}this._disabledOK=!0}},onLoad:function(a){if(!this.window.__registeredWindow)this.window.__registeredWindow=!0,this._iframeRegHandle=z.registerIframe(this.iframe);if(!o("ie")&&!o("webkit")&&(this.height||o("mozilla")))this.editNode=this.document.body;else{this.editNode=this.document.body.firstChild;
var b=this;if(o("ie"))this.tabStop=d.create("div",{tabIndex:-1},this.editingArea),this.iframe.onfocus=function(){b.editNode.setActive()}}this.focusNode=this.editNode;var c=this.events.concat(this.captureEvents),f=this.iframe?this.document:this.editNode;h.forEach(c,function(a){this.connect(f,a.toLowerCase(),a)},this);this.connect(f,"onmouseup","onClick");o("ie")?(this.connect(this.document,"onmousedown","_onIEMouseDown"),this.editNode.style.zoom=1):this.connect(this.document,"onmousedown",function(){delete this._cursorToStart});
if(o("webkit"))this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged"),this.connect(this.document,"onmousedown",function(a){(a=a.target)&&(a===this.document.body||a===this.document)&&this.defer("placeCursorAtEnd")});if(o("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(g){}this.isLoaded=!0;this.set("disabled",this.disabled);c=m.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&
s(m.hitch(this,"defer","focus",this.updateInterval));this.value=this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(c):c()},onKeyDown:function(a){if(a.keyCode===n.TAB&&this.isTabIndent&&(j.stop(a),this.queryCommandEnabled(a.shiftKey?"outdent":"indent")))this.execCommand(a.shiftKey?"outdent":"indent");if(o("ie"))if(a.keyCode==n.TAB&&!this.isTabIndent)a.shiftKey&&!a.ctrlKey&&!a.altKey?this.iframe.focus():!a.shiftKey&&!a.ctrlKey&&!a.altKey&&this.tabStop.focus();else if(a.keyCode===n.BACKSPACE&&
"Control"===this.document.selection.type)j.stop(a),this.execCommand("delete");else if(65<=a.keyCode&&90>=a.keyCode||37<=a.keyCode&&40>=a.keyCode)a.charCode=a.keyCode,this.onKeyPress(a);o("ff")&&(a.keyCode===n.PAGE_UP||a.keyCode===n.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&a.preventDefault();return!0},onKeyUp:function(){},setDisabled:function(a){k.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",
a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(b){this.document?a.set(this.document.body,"spellcheck",!b):this.onLoadDeferred.then(m.hitch(this,function(){a.set(this.document.body,"spellcheck",!b)}));this._set("disableSpellCheck",b)},onKeyPress:function(a){var b=this._keyHandlers[a.keyChar&&a.keyChar.toLowerCase()||a.keyCode],d=arguments;b&&!a.altKey&&h.some(b,function(b){if(!(b.shift^a.shiftKey)&&!(b.ctrl^(a.ctrlKey||a.metaKey)))return b.handler.apply(this,d)||
a.preventDefault(),!0},this);if(!this._onKeyHitch)this._onKeyHitch=m.hitch(this,"onKeyPressed");this.defer("_onKeyHitch",1);return!0},addKeyHandler:function(a,b,d,c){m.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:d||!1,ctrl:b||!1,handler:c})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){!this.focused&&!this.disabled&&this.focus()},_onBlur:function(a){this.inherited(arguments);var b=
this.getValue(!0);if(b!==this.value)this.onChange(b);this._set("value",b)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!o("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){if(this.isLoaded){if(this._cursorToStart&&(delete this._cursorToStart,this.editNode.childNodes)){this.placeCursorAtStart();
return}o("ie")?this.editNode&&this.editNode.focus&&this.iframe.fireEvent("onfocus",document.createEventObject()):z.focus(this.iframe)}else this.focusOnLoad=!0},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(a,b){var d=a.toLowerCase();"formatblock"===
d?o("safari")&&void 0===b&&(d="heading"):"hilitecolor"===d&&!o("mozilla")&&(d="backcolor");return d},_qcaCache:{},queryCommandAvailable:function(a){var b=this._qcaCache[a];return void 0!==b?b:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){function b(a){return{ie:Boolean(a&d),mozilla:Boolean(a&c),webkit:Boolean(a&f),opera:Boolean(a&g)}}var d=1,c=2,f=4,g=8,e=null;switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":e=
b(c|d|f|g);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":e=b(c|d|g|f);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":e=b(d);break;case "cut":case "copy":case "paste":e=b(d|c|f|g);break;case "inserttable":e=
b(c|d);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":e=b(d|c);break;default:return!1}return o("ie")&&e.ie||o("mozilla")&&e.mozilla||o("webkit")&&e.webkit||o("opera")&&e.opera},execCommand:function(a,b){var d;this.focus();a=this._normalizeCommand(a,b);if(void 0!==b){if("heading"===a)throw Error("unimplemented");"formatblock"===a&&o("ie")&&(b="<"+b+">")}var c="_"+a+"Impl";if(this[c])d=this[c](b);else if((b=
1<arguments.length?b:null)||"createlink"!==a)d=this.document.execCommand(a,!1,b);this.onDisplayChanged();return d},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;var a=this._normalizeCommand(a),b="_"+a+"EnabledImpl";return this[b]?this[b](a):this._browserQueryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);try{return this.document.queryCommandState(a)}catch(b){return!1}},queryCommandValue:function(a){if(this.disabled||
!this._disabledOK)return!1;a=this._normalizeCommand(a);if(o("ie")&&"formatblock"===a)a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(o("mozilla")&&"hilitecolor"===a){var b;try{b=this.document.queryCommandValue("styleWithCSS")}catch(d){b=!1}this.document.execCommand("styleWithCSS",!1,!0);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",!1,b)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,b){return p.withGlobal(this.window,
a,w,b)},placeCursorAtStart:function(){this.focus();var a=!1;if(o("mozilla"))for(var b=this.editNode.firstChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this._sCall("selectElement",[b]);break}}else if(1===b.nodeType){a=!0;/br|input|img|base|meta|area|basefont|hr|link/.test(b.tagName?b.tagName.toLowerCase():"")?this._sCall("selectElement",[b]):this._sCall("selectElementChildren",[b]);break}b=b.nextSibling}else a=!0,this._sCall("selectElementChildren",[this.editNode]);
a&&this._sCall("collapse",[!0])},placeCursorAtEnd:function(){this.focus();var a=!1;if(o("mozilla"))for(var b=this.editNode.lastChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this._sCall("selectElement",[b]);break}}else if(1===b.nodeType){a=!0;this._sCall("selectElement",[b.lastChild||b]);break}b=b.previousSibling}else a=!0,this._sCall("selectElementChildren",[this.editNode]);a&&this._sCall("collapse",[!1])},getValue:function(a){return this.textarea&&(this.isClosed||
!this.isLoaded)?this.textarea.value:this._postFilterContent(null,a)},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(this.isLoaded){this._cursorToStart=!0;if(this.textarea&&(this.isClosed||!this.isLoaded))this.textarea.value=a;else{var a=this._preFilterContent(a),b=this.isClosed?this.domNode:this.editNode;a&&o("mozilla")&&"<p></p>"===a.toLowerCase()&&(a="<p>&#160;</p>");!a&&o("webkit")&&(a="&#160;");b.innerHTML=a;this._preDomFilterContent(b)}this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(m.hitch(this,function(){this.setValue(a)}))},replaceValue:function(a){if(this.isClosed)this.setValue(a);else if(this.window&&this.window.getSelection&&!o("mozilla"))this.setValue(a);else if(this.window&&this.window.getSelection){a=this._preFilterContent(a);this.execCommand("selectall");if(!a)this._cursorToStart=!0,a="&#160;";this.execCommand("inserthtml",a);this._preDomFilterContent(this.editNode)}else this.document&&this.document.selection&&this.setValue(a);
this._set("value",this.getValue(!0))},_preFilterContent:function(a){var b=a;h.forEach(this.contentPreFilters,function(a){a&&(b=a(b))});return b},_preDomFilterContent:function(a){a=a||this.editNode;h.forEach(this.contentDomPreFilters,function(b){b&&m.isFunction(b)&&b(a)},this)},_postFilterContent:function(a,b){var d;m.isString(a)?d=a:(a=a||this.editNode,this.contentDomPostFilters.length&&(b&&(a=m.clone(a)),h.forEach(this.contentDomPostFilters,function(b){a=b(a)})),d=D.getChildrenHtml(a));m.trim(d.replace(/^\xA0\xA0*/,
"").replace(/\xA0\xA0*$/,"")).length||(d="");h.forEach(this.contentPostFilters,function(a){d=a(d)});return d},_saveContent:function(){var a=c.byId(E._scopeName+"._editor.RichText.value");a&&(a.value&&(a.value+=this._SEPARATOR),a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");b||(a=a.replace(/'/gm,"&#39;"));return a},getNodeHtml:function(a){k.deprecated("dijit.Editor::getNodeHtml is deprecated",
"use dijit/_editor/html::getNodeHtml instead",2);return D.getNodeHtml(a)},getNodeChildrenHtml:function(a){k.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return D.getChildrenHtml(a)},close:function(a){if(!this.isClosed){arguments.length||(a=!0);a&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this.disconnect(this._webkitListener),delete this._webkitListener);if(o("ie"))this.iframe.onfocus=
null;this.iframe._loadFunc=null;this._iframeRegHandle&&(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var c=this.textarea.style;c.position="";c.left=c.top="";if(o("ie"))c.overflow=this.__overflow,this.__overflow=null;this.textarea.value=this.value;d.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;b.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;
if(this.window&&this.window._frameElement)this.window._frameElement=null;this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);C._globalSaveHandler&&delete C._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,
"");a=a.replace(/\sclass="apple-style-span"/gi,"");return a=a.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")},
_browserQueryCommandEnabled:function(a){if(!a)return!1;var b=o("ie")?this.document.selection.createRange():this.document;try{return b.queryCommandEnabled(a)}catch(d){return!1}},_createlinkEnabledImpl:function(){var a=!0;return a=o("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var a=!0;return a=o("mozilla")||o("webkit")?this._sCall("hasAncestorElement",["a"]):this._browserQueryCommandEnabled("unlink")},
_inserttableEnabledImpl:function(){var a=!0;return a=o("mozilla")||o("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var a=!0;o("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("cut");return a},_copyEnabledImpl:function(){var a=!0;o("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("copy");return a},_pasteEnabledImpl:function(){var a=!0;return o("webkit")?
!0:a=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(a){return o("ie")?this._inserthtmlImpl("<hr>"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){return this.queryCommandEnabled("unlink")&&(o("mozilla")||o("webkit"))?(this._sCall("selectElement",[this._sCall("getAncestorElement",["a"])]),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",!1,a)},_hilitecolorImpl:function(a){var b;this._handleTextColorOrProperties("hilitecolor",
a)||(o("mozilla")?(this.document.execCommand("styleWithCSS",!1,!0),b=this.document.execCommand("hilitecolor",!1,a),this.document.execCommand("styleWithCSS",!1,!1)):b=this.document.execCommand("hilitecolor",!1,a));return b},_backcolorImpl:function(a){o("ie")&&(a=a?a:null);var b=this._handleTextColorOrProperties("backcolor",a);b||(b=this.document.execCommand("backcolor",!1,a));return b},_forecolorImpl:function(a){o("ie")&&(a=a?a:null);var b=!1;(b=this._handleTextColorOrProperties("forecolor",a))||(b=
this.document.execCommand("forecolor",!1,a));return b},_inserthtmlImpl:function(a){var a=this._preFilterContent(a),b=!0;if(o("ie")){var d=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var c=d.item(0);d.length;)d.remove(d.item(0));c.outerHTML=a}else d.pasteHTML(a);d.select()}else o("mozilla")&&!a.length?this._sCall("remove"):b=this.document.execCommand("inserthtml",!1,a);return b},_boldImpl:function(a){var b=!1;o("ie")&&(this._adaptIESelection(),
b=this._adaptIEFormatAreaAndExec("bold"));b||(b=this.document.execCommand("bold",!1,a));return b},_italicImpl:function(a){var b=!1;o("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("italic"));b||(b=this.document.execCommand("italic",!1,a));return b},_underlineImpl:function(a){var b=!1;o("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("underline"));b||(b=this.document.execCommand("underline",!1,a));return b},_strikethroughImpl:function(a){var b=!1;o("ie")&&(this._adaptIESelection(),
b=this._adaptIEFormatAreaAndExec("strikethrough"));b||(b=this.document.execCommand("strikethrough",!1,a));return b},_superscriptImpl:function(a){var b=!1;o("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("superscript"));b||(b=this.document.execCommand("superscript",!1,a));return b},_subscriptImpl:function(a){var b=!1;o("ie")&&(this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("subscript"));b||(b=this.document.execCommand("subscript",!1,a));return b},_fontnameImpl:function(a){var b;
o("ie")&&(b=this._handleTextColorOrProperties("fontname",a));b||(b=this.document.execCommand("fontname",!1,a));return b},_fontsizeImpl:function(a){var b;o("ie")&&(b=this._handleTextColorOrProperties("fontsize",a));b||(b=this.document.execCommand("fontsize",!1,a));return b},_insertorderedlistImpl:function(a){var b=!1;o("ie")&&(b=this._adaptIEList("insertorderedlist",a));b||(b=this.document.execCommand("insertorderedlist",!1,a));return b},_insertunorderedlistImpl:function(a){var b=!1;o("ie")&&(b=this._adaptIEList("insertunorderedlist",
a));b||(b=this.document.execCommand("insertunorderedlist",!1,a));return b},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(a){var b=0;if(a&&a.childNodes){var d;for(d=0;d<a.childNodes.length;d++)var c=g.position(a.childNodes[d]),b=b+c.h}return b},_isNodeEmpty:function(a,b){return 1===a.nodeType?0<a.childNodes.length?this._isNodeEmpty(a.childNodes[0],b):!0:3===a.nodeType?
""===a.nodeValue.substring(b):!1},_removeStartingRangeFromRange:function(a,b){if(a.nextSibling)b.setStart(a.nextSibling,0);else{for(var d=a.parentNode;d&&null==d.nextSibling;)d=d.parentNode;d&&b.setStart(d.nextSibling,0)}return b},_adaptIESelection:function(){var a=x.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var b=a.getRangeAt(0),d=b.startContainer,c=b.startOffset;3===d.nodeType&&c>=d.length&&d.nextSibling;)c-=d.length,d=d.nextSibling;for(var f=null;this._isNodeEmpty(d,c)&&
d!==f;)f=d,b=this._removeStartingRangeFromRange(d,b),d=b.startContainer,c=0;a.removeAllRanges();a.addRange(b)}},_adaptIEFormatAreaAndExec:function(a){var b=x.getSelection(this.window),c=this.document,f,g,e,j,i,k,l;if(a&&b&&b.isCollapsed){if(this.queryCommandValue(a)){a=this._tagNamesForCommand(a);e=b.getRangeAt(0);j=e.startContainer;if(3===j.nodeType&&(g=e.endOffset,j.length<g))g=this._adjustNodeAndOffset(f,g),j=g.node;for(;j&&j!==this.editNode;){f=j.tagName?j.tagName.toLowerCase():"";if(-1<h.indexOf(a,
f)){l=j;break}j=j.parentNode}if(l&&(f=e.startContainer,a=c.createElement(l.tagName),d.place(a,l,"after"),f&&3===f.nodeType)){g=e.endOffset;if(f.length<g)g=this._adjustNodeAndOffset(f,g),f=g.node,g=g.offset;j=f.nodeValue;e=c.createTextNode(j.substring(0,g));var n=j.substring(g,j.length);n&&(i=c.createTextNode(n));d.place(e,f,"before");if(i)k=c.createElement("span"),k.className="ieFormatBreakerSpan",d.place(k,f,"after"),d.place(i,k,"after"),i=k;d.destroy(f);e=e.parentNode;for(f=[];e!==l;){j=e.tagName;
g={tagName:j};f.push(g);j=c.createElement(j);if(e.style&&j.style&&e.style.cssText)j.style.cssText=e.style.cssText,g.cssText=e.style.cssText;if("FONT"===e.tagName){if(e.color)j.color=e.color,g.color=e.color;if(e.face)j.face=e.face,g.face=e.face;if(e.size)j.size=e.size,g.size=e.size}if(e.className)j.className=e.className,g.className=e.className;if(i)for(;i;)g=i.nextSibling,j.appendChild(i),i=g;j.tagName==e.tagName?(k=c.createElement("span"),k.className="ieFormatBreakerSpan",d.place(k,e,"after"),d.place(j,
k,"after")):d.place(j,e,"after");i=j;e=e.parentNode}if(i){if(1===i.nodeType||3===i.nodeType&&i.nodeValue)a.innerHTML="";for(;i;)g=i.nextSibling,a.appendChild(i),i=g}if(f.length){g=f.pop();i=c.createElement(g.tagName);if(g.cssText&&i.style)i.style.cssText=g.cssText;if(g.className)i.className=g.className;if("FONT"===g.tagName){if(g.color)i.color=g.color;if(g.face)i.face=g.face;if(g.size)i.size=g.size}for(d.place(i,a,"before");f.length;){g=f.pop();l=c.createElement(g.tagName);if(g.cssText&&l.style)l.style.cssText=
g.cssText;if(g.className)l.className=g.className;if("FONT"===g.tagName){if(g.color)l.color=g.color;if(g.face)l.face=g.face;if(g.size)l.size=g.size}i.appendChild(l);i=l}l=c.createTextNode(".");k.appendChild(l);i.appendChild(l)}else k=c.createElement("span"),k.className="ieFormatBreakerSpan",l=c.createTextNode("."),k.appendChild(l),d.place(k,a,"before");i=x.create(this.window);i.setStart(l,0);i.setEnd(l,l.length);b.removeAllRanges();b.addRange(i);this._sCall("collapse",[!1]);l.parentNode.innerHTML=
"";a.firstChild||d.destroy(a);return!0}return!1}e=b.getRangeAt(0);if((f=e.startContainer)&&3===f.nodeType){g=e.startOffset;if(f.length<g)g=this._adjustNodeAndOffset(f,g),f=g.node,g=g.offset;j=f.nodeValue;e=c.createTextNode(j.substring(0,g));n=j.substring(g);""!==n&&(i=c.createTextNode(j.substring(g)));k=c.createElement("span");l=c.createTextNode(".");k.appendChild(l);e.length?d.place(e,f,"after"):e=f;d.place(k,e,"after");i&&d.place(i,k,"after");d.destroy(f);i=x.create(this.window);i.setStart(l,0);
i.setEnd(l,l.length);b.removeAllRanges();b.addRange(i);c.execCommand(a);d.place(k.firstChild,k,"before");d.destroy(k);i.setStart(l,0);i.setEnd(l,l.length);b.removeAllRanges();b.addRange(i);this._sCall("collapse",[!1]);l.parentNode.innerHTML="";return!0}}else return!1},_adaptIEList:function(a){var b=x.getSelection(this.window);if(b.isCollapsed&&b.rangeCount&&!this.queryCommandValue(a)){var c=b.getRangeAt(0),g=c.startContainer;if(g&&3==g.nodeType&&!c.startOffset)return c="ul","insertorderedlist"===
a&&(c="ol"),a=this.document.createElement(c),c=d.create("li",null,a),d.place(a,g,"before"),c.appendChild(g),d.create("br",null,a,"after"),a=x.create(this.window),a.setStart(g,0),a.setEnd(g,g.length),b.removeAllRanges(),b.addRange(a),this._sCall("collapse",[!0]),!0}return!1},_handleTextColorOrProperties:function(a,b){var c=x.getSelection(this.window),g=this.document,e,h,j,i,k,b=b||null;if(a&&c&&c.isCollapsed&&c.rangeCount&&(h=c.getRangeAt(0),(e=h.startContainer)&&3===e.nodeType)){k=h.startOffset;if(e.length<
k)h=this._adjustNodeAndOffset(e,k),e=h.node,k=h.offset;j=e.nodeValue;h=g.createTextNode(j.substring(0,k));""!==j.substring(k)&&(i=g.createTextNode(j.substring(k)));j=g.createElement("span");k=g.createTextNode(".");j.appendChild(k);g=g.createElement("span");j.appendChild(g);h.length?d.place(h,e,"after"):h=e;d.place(j,h,"after");i&&d.place(i,j,"after");d.destroy(e);e=x.create(this.window);e.setStart(k,0);e.setEnd(k,k.length);c.removeAllRanges();c.addRange(e);if(o("webkit")){c="color";if("hilitecolor"===
a||"backcolor"===a)c="backgroundColor";f.set(j,c,b);this._sCall("remove",[]);d.destroy(g);j.innerHTML="&#160;";this._sCall("selectElement",[j]);this.focus()}else this.execCommand(a,b),d.place(j.firstChild,j,"before"),d.destroy(j),e.setStart(k,0),e.setEnd(k,k.length),c.removeAllRanges(),c.addRange(e),this._sCall("collapse",[!1]),k.parentNode.removeChild(k);return!0}return!1},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3===a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,
offset:b}},_tagNamesForCommand:function(a){return"bold"===a?["b","strong"]:"italic"===a?["i","em"]:"strikethrough"===a?["s","strike"]:"superscript"===a?["sup"]:"subscript"===a?["sub"]:"underline"===a?["u"]:[]},_stripBreakerNodes:function(a){if(this.isLoaded)return u(".ieFormatBreakerSpan",a).forEach(function(a){for(;a.firstChild;)d.place(a.firstChild,a,"before");d.destroy(a)}),a}});return C})},"dojo/_base/url":function(){define("dojo/_base/url",["./kernel"],function(h){var l=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,
i=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,e=function(){for(var c=arguments,a=[c[0]],b=1;b<c.length;b++)if(c[b]){var d=new e(c[b]+""),a=new e(a[0]+"");if(""==d.path&&!d.scheme&&!d.authority&&!d.query){if(null!=d.fragment)a.fragment=d.fragment;d=a}else if(!d.scheme&&(d.scheme=a.scheme,!d.authority&&(d.authority=a.authority,"/"!=d.path.charAt(0)))){for(var a=(a.path.substring(0,a.path.lastIndexOf("/")+1)+d.path).split("/"),g=0;g<a.length;g++)"."==a[g]?g==a.length-1?a[g]="":(a.splice(g,
1),g--):0<g&&!(1==g&&""==a[0])&&".."==a[g]&&".."!=a[g-1]&&(g==a.length-1?(a.splice(g,1),a[g-1]=""):(a.splice(g-1,2),g-=2));d.path=a.join("/")}a=[];d.scheme&&a.push(d.scheme,":");d.authority&&a.push("//",d.authority);a.push(d.path);d.query&&a.push("?",d.query);d.fragment&&a.push("#",d.fragment)}this.uri=a.join("");c=this.uri.match(l);this.scheme=c[2]||(c[1]?"":null);this.authority=c[4]||(c[3]?"":null);this.path=c[5];this.query=c[7]||(c[6]?"":null);this.fragment=c[9]||(c[8]?"":null);if(null!=this.authority)c=
this.authority.match(i),this.user=c[3]||null,this.password=c[4]||null,this.host=c[6]||c[7],this.port=c[9]||null};e.prototype.toString=function(){return this.uri};return h._Url=e})},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(h,l,i,e,c){var a={getType:function(){if(e.doc.getSelection){var a="text",d;try{d=e.global.getSelection()}catch(c){}d&&1==d.rangeCount&&(d=d.getRangeAt(0),d.startContainer==
d.endContainer&&1==d.endOffset-d.startOffset&&3!=d.startContainer.nodeType&&(a="control"));return a}return e.doc.selection.type.toLowerCase()},getSelectedText:function(){if(e.doc.getSelection){var a=e.global.getSelection();return a?a.toString():""}return"control"==c._editor.selection.getType()?null:e.doc.selection.createRange().text},getSelectedHtml:function(){if(e.doc.getSelection){var a=e.global.getSelection();if(a&&a.rangeCount){var d,g="";for(d=0;d<a.rangeCount;d++){var f=a.getRangeAt(d).cloneContents(),
h=e.doc.createElement("div");h.appendChild(f);g+=h.innerHTML}return g}return null}return"control"==c._editor.selection.getType()?null:e.doc.selection.createRange().htmlText},getSelectedElement:function(){if("control"==c._editor.selection.getType()){if(e.doc.getSelection){var a=e.global.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}if((a=e.doc.selection.createRange())&&a.item)return e.doc.selection.createRange().item(0)}return null},getParentElement:function(){if("control"==c._editor.selection.getType()){var a=
this.getSelectedElement();if(a)return a.parentNode}else if(e.doc.getSelection){if(a=e.global.getSelection()){for(a=a.anchorNode;a&&1!=a.nodeType;)a=a.parentNode;return a}}else return a=e.doc.selection.createRange(),a.collapse(!0),a.parentElement();return null},hasAncestorElement:function(a){return null!=this.getAncestorElement.apply(this,arguments)},getAncestorElement:function(a){return this.getParentOfType(this.getSelectedElement()||this.getParentElement(),arguments)},isTag:function(a,d){if(a&&a.tagName)for(var c=
a.tagName.toLowerCase(),f=0;f<d.length;f++){var e=(""+d[f]).toLowerCase();if(c==e)return e}return""},getParentOfType:function(a,d){for(;a;){if(this.isTag(a,d).length)return a;a=a.parentNode}return null},collapse:function(a){if(e.doc.getSelection){var d=e.global.getSelection();d.removeAllRanges?a?d.collapseToStart():d.collapseToEnd():d.collapse(a)}else d=e.doc.selection.createRange(),d.collapse(a),d.select()},remove:function(){var a=e.doc.selection;e.doc.getSelection?(a=e.global.getSelection(),a.deleteFromDocument()):
"none"!=a.type.toLowerCase()&&a.clear();return a},selectElementChildren:function(a,d){var c=e.doc,a=h.byId(a);if(e.doc.getSelection){var f=e.global.getSelection();i("opera")?(c=f.rangeCount?f.getRangeAt(0):c.createRange(),c.setStart(a,0),c.setEnd(a,3==a.nodeType?a.length:a.childNodes.length),f.addRange(c)):f.selectAllChildren(a)}else if(c=a.ownerDocument.body.createTextRange(),c.moveToElementText(a),!d)try{c.select()}catch(j){}},selectElement:function(a,d){var c,a=h.byId(a),f=a.ownerDocument,j=e.global;
if(f.getSelection)j=j.getSelection(),c=f.createRange(),j.removeAllRanges&&(i("opera")&&j.getRangeAt(0)&&(c=j.getRangeAt(0)),c.selectNode(a),j.removeAllRanges(),j.addRange(c));else try{var k=a.tagName?a.tagName.toLowerCase():"";c="img"===k||"table"===k?e.body(f).createControlRange():e.body(f).createRange();c.addElement(a);d||c.select()}catch(l){this.selectElementChildren(a,d)}},inSelection:function(a){if(a){var d,c=e.doc,f;if(e.doc.getSelection){var h=e.global.getSelection();h&&0<h.rangeCount&&(f=
h.getRangeAt(0));if(f&&f.compareBoundaryPoints&&c.createRange)try{if(d=c.createRange(),d.setStart(a,0),1===f.compareBoundaryPoints(f.START_TO_END,d))return!0}catch(i){}}else{f=c.selection.createRange();try{(d=a.ownerDocument.body.createControlRange())&&d.addElement(a)}catch(l){try{d=a.ownerDocument.body.createTextRange(),d.moveToElementText(a)}catch(m){}}if(f&&d&&1===f.compareEndPoints("EndToStart",d))return!0}}return!1}};l.setObject("dijit._editor.selection",a);return a})},"dijit/_editor/range":function(){define("dijit/_editor/range",
["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(h,l,i,e,c){c.range={};c.range.getIndex=function(a,b){for(var d=[],c=[],f=a,e,h;a!=b;){var i=0;for(e=a.parentNode;h=e.childNodes[i++];)if(h===a){--i;break}d.unshift(i);c.unshift(i-e.childNodes.length);a=e}if(0<d.length&&3==f.nodeType){for(h=f.previousSibling;h&&3==h.nodeType;)d[d.length-1]--,h=h.previousSibling;for(h=f.nextSibling;h&&3==h.nodeType;)c[c.length-1]++,h=h.nextSibling}return{o:d,r:c}};c.range.getNode=
function(a,b){if(!i.isArray(a)||0==a.length)return b;var d=b;h.every(a,function(a){if(0<=a&&a<d.childNodes.length)d=d.childNodes[a];else return d=null,!1;return!0});return d};c.range.getCommonAncestor=function(a,b,d){for(var d=d||a.ownerDocument.body,c=function(a){for(var b=[];a;)if(b.unshift(a),a!==d)a=a.parentNode;else break;return b},a=c(a),b=c(b),c=Math.min(a.length,b.length),f=a[0],e=1;e<c;e++)if(a[e]===b[e])f=a[e];else break;return f};c.range.getAncestor=function(a,b,d){for(d=d||a.ownerDocument.body;a&&
a!==d;){var c=a.nodeName.toUpperCase();if(b.test(c))return a;a=a.parentNode}return null};c.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;c.range.getBlockAncestor=function(a,b,d){for(var d=d||a.ownerDocument.body,b=b||c.range.BlockTagNames,g=null,f;a&&a!==d;){var e=a.nodeName.toUpperCase();!g&&b.test(e)&&(g=a);!f&&/^(?:BODY|TD|TH|CAPTION)$/.test(e)&&(f=a);a=a.parentNode}return{blockNode:g,blockContainer:f||a.ownerDocument.body}};c.range.atBeginningOfContainer=function(a,
b,d){var c=!1,f=0==d;!f&&3==b.nodeType&&/^[\s\xA0]+$/.test(b.nodeValue.substr(0,d))&&(f=!0);if(f)for(c=!0;b&&b!==a;){if(b.previousSibling){c=!1;break}b=b.parentNode}return c};c.range.atEndOfContainer=function(a,b,d){var c=!1,f=d==(b.length||b.childNodes.length);!f&&3==b.nodeType&&/^[\s\xA0]+$/.test(b.nodeValue.substr(d))&&(f=!0);if(f)for(c=!0;b&&b!==a;){if(b.nextSibling){c=!1;break}b=b.parentNode}return c};c.range.adjacentNoneTextNode=function(a,b){for(var d=a,c=0-a.length||0,f=b?"nextSibling":"previousSibling";d&&
!(3!=d.nodeType);){c+=d.length;d=d[f]}return[d,c]};c.range.create=function(a){a=a||window;return a.getSelection?a.document.createRange():new c.range.W3CRange};c.range.getSelection=function(a,b){if(a.getSelection)return a.getSelection();var d=new c.range.ie.selection(a);b||d._getCurrentSelection();return d};if(!window.getSelection)c.range.ie={cachedSelection:{},selection:function(a){this._ranges=[];this.addRange=function(a,d){this._ranges.push(a);d||a._select();this.rangeCount=this._ranges.length};
this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(a){return this._ranges[a]};this._getCurrentSelection=function(){this.removeAllRanges();var b;b=a.document.selection.createRange();(b="CONTROL"==a.document.selection.type.toUpperCase()?new c.range.W3CRange(c.range.ie.decomposeControlRange(b)):new c.range.W3CRange(c.range.ie.decomposeTextRange(b)))?(this.addRange(b,!0),this.isCollapsed=b.collapsed):this.isCollapsed=!0}},decomposeControlRange:function(a){var b=
a.item(0),d=a.item(a.length-1),a=b.parentNode,e=d.parentNode,b=c.range.getIndex(b,a).o[0],d=c.range.getIndex(d,e).o[0]+1;return[a,b,e,d]},getEndPoint:function(a,b){var d=a.duplicate();d.collapse(!b);var e="EndTo"+(b?"End":"Start"),f=d.parentElement(),i,k,l;0<f.childNodes.length?h.every(f.childNodes,function(b,h){var m;if(3!=b.nodeType)if(d.moveToElementText(b),0<d.compareEndPoints(e,a))if(l&&3==l.nodeType)i=l,m=!0;else return i=f,k=h,!1;else{if(h==f.childNodes.length-1)return i=f,k=f.childNodes.length,
!1}else h==f.childNodes.length-1&&(i=b,m=!0);if(m&&i){i=(m=c.range.adjacentNoneTextNode(i)[0])?m.nextSibling:f.firstChild;var o=c.range.adjacentNoneTextNode(i);m=o[0];o=o[1];m?(d.moveToElementText(m),d.collapse(!1)):d.moveToElementText(f);d.setEndPoint(e,a);k=d.text.length-o;return!1}l=b;return!0}):(i=f,k=0);if(!b&&1==i.nodeType&&k==i.childNodes.length){var m=i.nextSibling;m&&3==m.nodeType&&(i=m,k=0)}return[i,k]},setEndPoint:function(a,b,d){var a=a.duplicate(),e;if(3!=b.nodeType)if(0<d){if(e=b.childNodes[d-
1])if(3==e.nodeType)b=e,d=e.length;else if(e.nextSibling&&3==e.nextSibling.nodeType)b=e.nextSibling,d=0;else{a.moveToElementText(e.nextSibling?e:b);var f=e.parentNode;e=f.insertBefore(e.ownerDocument.createTextNode(" "),e.nextSibling);a.collapse(!1);f.removeChild(e)}}else a.moveToElementText(b),a.collapse(!0);3==b.nodeType&&(e=c.range.adjacentNoneTextNode(b),f=e[0],e=e[1],f?(a.moveToElementText(f),a.collapse(!1),"inherit"!=f.contentEditable&&e++):(a.moveToElementText(b.parentNode),a.collapse(!0),
a.move("character",1),a.move("character",-1)),d+=e,0<d&&a.move("character",d));return a},decomposeTextRange:function(a){var b=c.range.ie.getEndPoint(a),d=b[0],e=b[1],f=b[0],b=b[1];a.htmlText.length&&(a.htmlText==a.text?b=e+a.text.length:(b=c.range.ie.getEndPoint(a,!0),f=b[0],b=b[1]));return[d,e,f,b]},setRange:function(a,b,d,e,f,h){b=c.range.ie.setEndPoint(a,b,d);a.setEndPoint("StartToStart",b);if(!h)var i=c.range.ie.setEndPoint(a,e,f);a.setEndPoint("EndToEnd",i||b);return a}},l("dijit.range.W3CRange",
null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==this.endContainer?c.range.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&
this.startOffset==this.endOffset},setStart:function(a,b){b=parseInt(b);if(!(this.startContainer===a&&this.startOffset==b))delete this._cachedBookmark,this.startContainer=a,this.startOffset=b,this.endContainer?this._updateInternal():this.setEnd(a,b)},setEnd:function(a,b){b=parseInt(b);if(!(this.endContainer===a&&this.endOffset==b))delete this._cachedBookmark,this.endContainer=a,this.endOffset=b,this.startContainer?this._updateInternal():this.setStart(a,b)},setStartAfter:function(a,b){this._setPoint("setStart",
a,b,1)},setStartBefore:function(a,b){this._setPoint("setStart",a,b,0)},setEndAfter:function(a,b){this._setPoint("setEnd",a,b,1)},setEndBefore:function(a,b){this._setPoint("setEnd",a,b,0)},_setPoint:function(a,b,d,e){d=c.range.getIndex(b,b.parentNode).o;this[a](b.parentNode,d.pop()+e)},_getIERange:function(){var a=(this._body||this.endContainer.ownerDocument.body).createTextRange();c.range.ie.setRange(a,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return a},
getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var a=this.startContainer,b=this._getIERange();3===a.nodeType&&!this.startOffset&&this.setStartBefore(a);b.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var a=new c.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);a._body=this._body;return a},
detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});return c.range})},"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(h,l,i){var e={};l.setObject("dijit._editor.html",e);var c=e.escapeXml=function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");b||(a=a.replace(/'/gm,
"&#39;"));return a};e.getNodeHtml=function(a){var b=[];e.getNodeHtmlHelper(a,b);return b.join("")};e.getNodeHtmlHelper=function(a,b){switch(a.nodeType){case 1:var d=a.nodeName.toLowerCase();if(!d||"/"==d.charAt(0))return"";b.push("<",d);var g=[],f={},j;if(i("dom-attributes-explicit")||i("dom-attributes-specified-flag"))for(var k=0;j=a.attributes[k++];){var l=j.name;if("_dj"!==l.substr(0,3)&&(!i("dom-attributes-specified-flag")||j.specified)&&!(l in f)){j=j.value;if("src"==l||"href"==l)a.getAttribute("_djrealurl")&&
(j=a.getAttribute("_djrealurl"));8===i("ie")&&"style"===l&&(j=j.replace("HEIGHT:","height:").replace("WIDTH:","width:"));g.push([l,j]);f[l]=j}}else{var m=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML,f=m.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi),m=m.substr(0,m.indexOf(">"));h.forEach(f,function(b){if(b){var c=b.indexOf("=");if(0<c&&(b=b.substring(0,c),"_dj"!=b.substr(0,3)))if(("src"==b||"href"==b)&&a.getAttribute("_djrealurl"))g.push([b,a.getAttribute("_djrealurl")]);else{var e;switch(b){case "style":e=
a.style.cssText.toLowerCase();break;case "class":e=a.className;break;case "width":if("img"===d){(c=/width=(\S+)/i.exec(m))&&(e=c[1]);break}case "height":if("img"===d){(c=/height=(\S+)/i.exec(m))&&(e=c[1]);break}default:e=a.getAttribute(b)}null!=e&&g.push([b,e.toString()])}}},this)}g.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(f=0;j=g[f++];)b.push(" ",j[0],'="',"string"===typeof j[1]?c(j[1],!0):j[1],'"');switch(d){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":b.push(" />");
break;case "script":b.push(">",a.innerHTML,"</",d,">");break;default:b.push(">"),a.hasChildNodes()&&e.getChildrenHtmlHelper(a,b),b.push("</",d,">")}break;case 4:case 3:b.push(c(a.nodeValue,!0));break;case 8:b.push("<\!--",c(a.nodeValue,!0),"--\>");break;default:b.push("<\!-- Element not recognized - Type: ",a.nodeType," Name: ",a.nodeName,"--\>")}};e.getChildrenHtml=function(a){var b=[];e.getChildrenHtmlHelper(a,b);return b.join("")};e.getChildrenHtmlHelper=function(a,b){if(a)for(var c=a.childNodes||
a,g=!i("ie")||c!==a,f,h=0;f=c[h++];)(!g||f.parentNode==a)&&e.getNodeHtmlHelper(f,b)};return e})},"*now":function(h){h(['dojo/i18n!*preload*app/nls/cocoach_base*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});define("app/cocoach_base",[],1);